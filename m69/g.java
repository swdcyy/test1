package m69.g;
import j69.c;
import java.lang.Object;
import java.lang.String;
import brd.g;
import java.lang.Class;
import com.kwai.robust.PatchProxy;
import kotlin.jvm.internal.a;
import l69.u;
import java.util.Objects;
import h69.g;
import q87.c;
import boc.b;
import l69.u$a;
import i69.a;
import com.yxcorp.gifshow.util.resource.n$c;
import com.yxcorp.gifshow.util.resource.n;
import com.yxcorp.gifshow.aicut.api.AICutMusicInfo;
import brd.t;
import com.kwai.robust.PatchProxyResult;
import com.yxcorp.gifshow.util.PostExperimentUtils;
import com.yxcorp.gifshow.aicut.api.MusicBeats;
import com.yxcorp.gifshow.aicut.api.MusicAnalysisResult;
import com.yxcorp.gifshow.model.CDNUrl;
import java.util.ArrayList;
import java.util.List;
import lnc.r6;
import m69.g$f;
import erd.o;
import t45.d;
import brd.z;
import m69.g$e;
import com.kwai.video.minecraft.model.EditorSdk2V2$VideoEditorProject;
import l69.n;
import l69.o;
import java.lang.RuntimeException;
import java.lang.Throwable;
import com.yxcorp.gifshow.util.PostUtils;
import com.kwai.video.editorsdk2.model.ImmutableArray;
import java.util.Iterator;
import java.lang.Iterable;
import kotlin.collections.CollectionsKt__CollectionsKt;
import com.kwai.video.minecraft.model.EditorSdk2V2$TrackAsset;
import com.kwai.video.minecraft.model.EditorSdk2V2$TimeRangeV2;
import java.io.File;
import com.yxcorp.gifshow.aicut.api.AICutGroupType;
import com.kuaishou.edit.draft.Workspace$Type;
import com.kuaishou.android.model.music.Music;
import yaa.c;
import com.yxcorp.gifshow.edit.draft.model.workspace.c;
import com.kuaishou.edit.draft.Music;
import lnc.w6;
import com.kuaishou.edit.draft.Music$Type;
import l69.p;
import java.lang.Enum;
import com.kuaishou.edit.draft.Song;
import com.kuaishou.edit.draft.TimeRange;
import com.kuaishou.edit.draft.ImportMusicParam;
import com.kuaishou.edit.draft.OperationMusicParam;
import com.kuaishou.edit.draft.OnlineMusicParam;
import com.kuaishou.edit.draft.Music$Source;
import com.kwai.gifshow.post.api.core.camerasdk.model.VideoContext;
import haa.a;
import com.yxcorp.gifshow.util.AdvEditUtil;
import wba.u;
import com.yxcorp.gifshow.edit.draft.model.DraftFileManager;
import java.lang.StringBuilder;
import java.lang.CharSequence;
import com.yxcorp.utility.TextUtils;
import l69.t;
import com.kwai.video.minecraft.model.EditorSdk2V2$AudioAsset;
import com.yxcorp.gifshow.edit.previewer.utils.AudioAssetUtils;
import mca.a;
import java.lang.Double;
import java.lang.Boolean;
import tkd.b;
import tkd.d;
import kob.i;
import lba.a;
import com.google.protobuf.GeneratedMessageLite;
import com.yxcorp.gifshow.edit.draft.model.c;
import com.kuaishou.edit.draft.OriginalVoice;
import o69.c;
import com.kuaishou.edit.draft.FeatureId;
import yaa.a;
import com.kuaishou.edit.draft.EditLyric;
import com.kuaishou.edit.draft.Workspace$Source;
import com.kwai.video.minecraft.model.EditorSdk2UtilsV2;
import j69.c$a;
import oa0.a;
import android.content.SharedPreferences;
import m69.g$c;
import java.util.concurrent.Callable;
import lnc.g7;
import com.kuaishou.edit.draft.Workspace$From;
import l69.q;
import l69.s;
import wba.n0;
import maa.a;
import com.google.protobuf.GeneratedMessageLite$Builder;
import com.kuaishou.edit.draft.Asset$b;
import com.yxcorp.gifshow.aicutv2.VideoTemplateProject;
import h69.j;
import java.lang.Number;
import com.yxcorp.gifshow.edit.previewer.utils.AudioAssetUtils$AssetIdType;
import fba.a;
import com.kuaishou.edit.draft.AICutTheme;
import com.yxcorp.gifshow.localwork.model.LongVideoLocalProject;
import android.app.Activity;
import i69.i;
import m69.g$d;
import lnc.e0;
import ekd.j;
import java.lang.IllegalArgumentException;
import wkd.b;
import com.yxcorp.gifshow.music.utils.a;
import com.yxcorp.gifshow.music.utils.a$a;
import java.lang.Integer;
import m69.g$a;
import m69.g$b;
import android.graphics.Bitmap;
import android.content.Intent;
import ekd.j0;
import com.yxcorp.gifshow.aicut.api.AICutStyle;
import k36.c;
import h36.a;
import k36.f;
import s66.a;
import com.yxcorp.gifshow.aicut.kwai.KSPOSTAICutLoadingActivity;
import com.yxcorp.gifshow.aicut.kwai.KSPOSTAICutLoadingActivity$a;
import q16.a$a;
import com.yxcorp.gifshow.model.EditorSplashImageInfo;
import java.io.Serializable;
import lq.i;
import lq.a;
import r16.a;
import q16.a;
import android.content.Context;
import r16.d;
import lq.e;
import com.yxcorp.gifshow.util.h0;
import com.yxcorp.gifshow.models.QMedia;
import com.yxcorp.gifshow.model.h;
import brd.m;
import rfc.a;
import cjd.e;
import m69.g$g;
import l69.v;
import o69.w0;
import android.net.Uri;
import ekd.x0;
import ekd.a0;
import i69.d;
import j69.a;
import j69.d;
import kotlin.text.StringsKt__StringsKt;
import qkd.b;
import com.kwai.video.minecraft.model.nano.Minecraft$LegacyAE2Effect;
import com.kwai.video.minecraft.model.nano.Minecraft$BeautyFilterParam;
import com.kwai.video.minecraft.model.nano.Minecraft$TimeEffectParam;
import com.kwai.video.minecraft.model.nano.Minecraft$VisualEffectParam;
import com.kwai.video.minecraft.model.nano.Minecraft$MagicTouchOverall;
import com.kwai.video.minecraft.model.nano.Minecraft$TouchEffectParam;
import com.kwai.video.minecraft.model.nano.Minecraft$WesterosBeautyFilterParam;
import com.kwai.video.minecraft.model.nano.Minecraft$WesterosBodySlimmingParam;
import com.kwai.video.minecraft.model.nano.Minecraft$WesterosMakeupParam;
import com.kwai.video.minecraft.model.nano.Minecraft$WesterosFaceMagicParam;
import m69.a;
import com.kwai.framework.plugin.downloader.PluginDownloadExtension;
import com.kwai.plugin.dva.Dva;
import com.kwai.plugin.dva.install.b;
import com.kwai.plugin.dva.work.c;
import w46.b;
import com.yxcorp.gifshow.aicut.logic.AICutGeneratorException;
import com.yxcorp.gifshow.aicut.api.AICutErrorCode;
import com.kwai.video.editorsdk2.VideoEditorSession;
import o56.c;
import o56.a;
import android.app.Application;
import wba.d0;
import com.kwai.video.editorsdk2.ThumbnailGenerator;
import com.kwai.video.editorsdk2.ThumbnailGeneratorRequestBuilder;
import com.kwai.video.editorsdk2.ThumbnailGeneratorRequest;
import com.kwai.video.editorsdk2.ThumbnailGeneratorResult;
import i69.j;
import l69.w;
import te6.b;

public final class g implements c	// class@002e1e
{

    public void g(){
       super();
    }
    public void A2(String p0,g p1){
       u a;
       if (PatchProxy.applyVoidTwoRefs(p0, p1, this, g.class, "16")) {
          return;
       }
       String str = "category";
       a.p(p0, str);
       String str1 = "emitter";
       a.p(p1, str1);
       a = u.a;
       Objects.requireNonNull(a);
       if (!PatchProxy.applyVoidTwoRefs(p0, p1, a, u.class, "2")) {
          a.p(p0, str);
          a.p(p1, str1);
          Object[] objArray = new Object[0];
          g.D().w("AICutRxModeDownloader", "prepareMode: downloadImmediately", objArray);
          b uob = a.a(p0);
          a.m(uob);
          n.m(uob, new u$a(p1, new a(p0)));
       }
       return;
    }
    public t B2(AICutMusicInfo p0){
       a uoa;
       t ot;
       Object[] obj = PatchProxy.applyOneRefs(p0, this, g.class, "22");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "info");
       int i = 100;
       String str = "KwaiAICutConfig";
       int i1 = 0;
       if (!PostExperimentUtils.M0()) {
          obj = new Object[i1];
          g.D().w(str, "downloadMusicBeats not in ab", obj);
          uoa = new a(new MusicBeats());
          uoa.d(i);
          ot = t.just(uoa);
          a.o(ot, "Observable.just\(AICutFil¡­t = FULL_PERCENT\n      }\)");
          return ot;
       }else {
          MusicAnalysisResult mAnalysisRes = p0.getMAnalysisResult();
          if (mAnalysisRes != null) {
             MusicBeats[] beats = mAnalysisRes.getBeats();
             if (beats != null) {
                object oobject = beats[i1];
                if (oobject != null) {
                   CDNUrl[] beatsUrls = oobject.getBeatsUrls();
                   if (beatsUrls != null) {
                      Object[] objArray = new Object[i1];
                      g.D().w(str, "downloadMusicBeats urls", objArray);
                      a uoa1 = new a(new MusicBeats());
                      ArrayList uArrayList = new ArrayList(beatsUrls.length);
                      int len = beatsUrls.length;
                      for (; i1 < len; i1 = i1 + 1) {
                         uArrayList.add(beatsUrls[i1].mUrl);
                      }
                      ot = r6.a(uArrayList).map(new g$f(uoa1)).observeOn(d.c).map(new g$e(p0));
                      a.o(ot, "PostDownloadFileUtil.dow¡­           it\n          }");
                      return ot;
                   }
                }
             }
          }
          obj = new Object[i1];
          g.D().w(str, "downloadMusicBeats empty", obj);
          uoa = new a(new MusicBeats());
          uoa.d(i);
          ot = t.just(uoa);
          a.o(ot, "Observable.just\(AICutFil¡­ent = FULL_PERCENT\n    }\)");
          return ot;
       }
    }
    public void C2(EditorSdk2V2$VideoEditorProject p0){
       String str = "10";
       if (PatchProxy.applyVoidOneRefs(p0, this, g.class, str)) {
          return;
       }
       o oo = n.f.d();
       if (oo != null) {
          o oo1 = o.class;
          if (!PatchProxy.applyVoidOneRefs(p0, oo, oo1, str)) {
             str = "KwaiAICutProject";
             if (p0 == null) {
                PostUtils.D(str, "onSdkTaskFinish", new RuntimeException("project is null"));
             }else if(!oo.i() || PatchProxy.applyVoidOneRefs(p0, oo, oo1, "11")){
                int i = 0;
                Object[] objArray = new Object[i];
                g.D().w(str, "restoreProjectFromOriginalVideo\(\) called", objArray);
                oo = oo.d;
                if (oo != null) {
                   ImmutableArray immutableArr = oo.trackAssets();
                   if (immutableArr != null) {
                      Iterator iterator = immutableArr.iterator();
                      while (iterator.hasNext()) {
                         Object obj = iterator.next();
                         int i1 = i + 1;
                         if (i < 0) {
                            CollectionsKt__CollectionsKt.W();
                         }
                         obj.setClippedRange(p0.trackAssets(i).clippedRange());
                         obj.setIsVocal(p0.trackAssets(i).isVocal());
                         i = i1;
                      }
                   }
                }
             }
          }
       }
       return;
    }
    public File D2(String p0){
       Object obj = PatchProxy.applyOneRefs(p0, this, g.class, "15");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "category");
       return u.a.b(p0);
    }
    public AICutGroupType E2(){
       AICutGroupType uAICutGroupT;
       AICutGroupType tIME_LINE_VI;
       PatchProxyResult patchProxyRe = PatchProxyResult.class;
       Object[] objArray = null;
       o obj = PatchProxy.apply(objArray, this, g.class, "2");
       if (obj != patchProxyRe) {
          return obj;
       }
       obj = n.f.d();
       if (obj != null) {
          uAICutGroupT = PatchProxy.apply(objArray, obj, o.class, "3");
          if (uAICutGroupT != patchProxyRe) {
          }else if(obj.i == Workspace$Type.ALBUM_MOVIE){
             tIME_LINE_VI = AICutGroupType.TIME_LINE_VIDEO;
          }else {
             tIME_LINE_VI = AICutGroupType.MULTI_TAB_AI_CUT_STYLE;
          }
          uAICutGroupT = tIME_LINE_VI;
          if (uAICutGroupT != null) {
          label_0036 :
             return uAICutGroupT;
          }
       }
       uAICutGroupT = AICutGroupType.MULTI_TAB_AI_CUT_STYLE;
       goto label_0036 ;
    }
    public AICutMusicInfo F2(){
       Song defaultInsta;
       TimeRange defaultInsta1;
       Song song;
       PatchProxyResult patchProxyRe = PatchProxyResult.class;
       Object[] objArray = null;
       o obj = PatchProxy.apply(objArray, this, g.class, "19");
       if (obj != patchProxyRe) {
          return obj;
       }
       obj = n.f.d();
       if (obj != null) {
          Music music = PatchProxy.apply(objArray, obj, o.class, "37");
          if (music != patchProxyRe) {
          }else {
             o b = obj.b;
             c uoc = (b != null)? b.J0(): objArray;
             music = w6.c(uoc);
             if (music != null) {
                Music$Type type = music.getType();
                o oo = 1;
                if (type == null) {
                label_004e :
                   defaultInsta = Song.getDefaultInstance();
                   a.o(defaultInsta, "Song.getDefaultInstance\(\)");
                   defaultInsta1 = TimeRange.getDefaultInstance();
                   a.o(defaultInsta1, "TimeRange.getDefaultInstance\(\)");
                }else {
                   int i = p.c[type.ordinal()];
                   if (i != oo) {
                      if (i != 2) {
                         if (i != 3) {
                            goto label_004e ;
                         }else {
                            ImportMusicParam importParam = music.getImportParam();
                            a.o(importParam, "draftMusic.importParam");
                            TimeRange selectedRang = importParam.getSelectedRange();
                            a.o(selectedRang, "draftMusic.importParam.selectedRange");
                            ImportMusicParam importParam1 = music.getImportParam();
                            a.o(importParam1, "draftMusic.importParam");
                            song = importParam1.getSong();
                            a.o(song, "draftMusic.importParam.song");
                            Song song1 = song;
                            defaultInsta1 = selectedRang;
                            defaultInsta = song1;
                         }
                      }else {
                         OperationMusicParam operationPar = music.getOperationParam();
                         a.o(operationPar, "draftMusic.operationParam");
                         defaultInsta = operationPar.getSong();
                         a.o(defaultInsta, "draftMusic.operationParam.song");
                         OperationMusicParam operationPar1 = music.getOperationParam();
                         a.o(operationPar1, "draftMusic.operationParam");
                         defaultInsta1 = operationPar1.getSelectedRange();
                         a.o(defaultInsta1, "draftMusic.operationParam.selectedRange");
                      }
                   }else {
                      OnlineMusicParam onlineParam = music.getOnlineParam();
                      a.o(onlineParam, "draftMusic.onlineParam");
                      defaultInsta = onlineParam.getSong();
                      a.o(defaultInsta, "draftMusic.onlineParam.song");
                      OnlineMusicParam onlineParam1 = music.getOnlineParam();
                      a.o(onlineParam1, "draftMusic.onlineParam");
                      defaultInsta1 = onlineParam1.getSelectedRange();
                      a.o(defaultInsta1, "draftMusic.onlineParam.selectedRange");
                   }
                }
                boolean b1 = (music.getSource() == Music$Source.CAPTURE)? true: false;
                oo = obj.b;
                a.m(oo);
                VideoContext videoContext = oo.d1();
                a.o(videoContext, "mDraft!!.videoContext");
                oo = obj.b;
                a.m(oo);
                c uoc1 = a.n(oo);
                File uFile = AdvEditUtil.e();
                a.o(uFile, "AdvEditUtil.getPostOutputFileDir\(\)");
                music = u.l(music, defaultInsta, defaultInsta1, b1, videoContext, uoc1, uFile);
                File uFile1 = DraftFileManager.E().H(obj.b);
                File uFile2 = new File(uFile1, defaultInsta.getFile());
                File uFile3 = new File(uFile1, defaultInsta.getMmuLyricsFile());
                if (uFile2.exists()) {
                   String absolutePath = uFile2.getAbsolutePath();
                   music.mPath = absolutePath;
                   music.mUrl = absolutePath;
                   Object[] objArray1 = new Object[0];
                   g.D().w("KwaiAICutProject", "getCurrentMusicInfoFromDraft path="+music.mPath, objArray1);
                   if (uFile3.exists() && !TextUtils.x(defaultInsta.getMmuLyricsFile())) {
                      music.mMmuLyrics = uFile3.getAbsolutePath();
                      music.mMmuLrcUrl = uFile3.getAbsolutePath();
                   }
                }
             }else {
                music = objArray;
             }
          }
       label_0163 :
          if (music != null) {
             objArray = t.a.a(music);
          }
       }
       return objArray;
    }
    public EditorSdk2V2$AudioAsset G2(EditorSdk2V2$VideoEditorProject p0){
       Object obj = PatchProxy.applyOneRefs(p0, this, g.class, "34");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "videoEditorProject");
       return AudioAssetUtils.c(true, p0);
    }
    public void H2(){
       if (PatchProxy.applyVoid(null, this, g.class, "1")) {
          return;
       }
       a.u();
       a.B();
       return;
    }
    public boolean I2(){
       return true;
    }
    public t J0(String p0,double p1,double p2){
       t ot;
       if (PatchProxy.isSupport(g.class)) {
          Object obj = PatchProxy.applyThreeRefs(p0, Double.valueOf(p1), Double.valueOf(p2), this, g.class, "27");
          if (obj != PatchProxyResult.class) {
             return obj;
          }
       }
       a.p(p0, "lyricStyleId");
       if (!PostExperimentUtils.L0()) {
          Object[] objArray = new Object[0];
          g.D().w("KwaiAICutConfig", "not in experiment", objArray);
          ot = t.just(Boolean.FALSE);
          a.o(ot, "Observable.just\(false\)");
          return ot;
       }else {
          d.a(0x2be267d).J0(p0, p1, p2);
          ot = t.just(Boolean.TRUE);
          a.o(ot, "Observable.just\(true\)");
          return ot;
       }
    }
    public void J2(EditorSdk2V2$VideoEditorProject p0){
       o g;
       String external;
       if (PatchProxy.applyVoidOneRefs(p0, this, g.class, "28")) {
          return;
       }
       String str = "videoProject";
       a.p(p0, str);
       o oo = n.f.d();
       if (oo != null && !PatchProxy.applyVoidOneRefs(p0, oo, o.class, "34")) {
          a.p(p0, str);
          Object[] objArray = new Object[0];
          g.D().w("KwaiAICutProject", "doOnSetProject\(\) called", objArray);
          oo.d = p0;
          o b = oo.b;
          if (b != null) {
             a uoa = b.g1();
             if (uoa != null) {
                a.o(uoa, "voiceDraft");
                OriginalVoice originalVoic = uoa.v();
                if (originalVoic != null) {
                   a.o(originalVoic, "voice");
                   oo.g.z = originalVoic.getEditMuteTrackAsset() ^ 0x01;
                }
             }
             g = oo.g;
             Music music = w6.c(b.J0());
             if (music != null) {
                FeatureId featureId = music.getFeatureId();
                if (featureId != null) {
                   external = featureId.getExternal();
                label_0075 :
                   g.u = external;
                   b = oo.g;
                   b.v = b.u;
                   g = oo.b;
                   if (g != null) {
                      c uoc = g.J0();
                      if (uoc != null) {
                         uoa = uoc.f0();
                         if (uoa != null) {
                            EditLyric uEditLyric = uoa.v();
                            if (uEditLyric != null) {
                               str = uEditLyric.getStyleId();
                               if (str != null) {
                               label_009e :
                                  if (!PatchProxy.applyVoidOneRefs(str, b, c.class, "7")) {
                                     a.p(str, "<set-?>");
                                     b.s = str;
                                  }
                                  b = oo.g;
                                  b.r0(b.s);
                               }
                            }
                         }
                      }
                   }
                   str = "";
                   goto label_009e ;
                }
             }
             external = null;
             goto label_0075 ;
          }
       }
       return;
    }
    public EditorSdk2V2$AudioAsset K2(EditorSdk2V2$VideoEditorProject p0){
       Object obj = PatchProxy.applyOneRefs(p0, this, g.class, "33");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "videoEditorProject");
       return AudioAssetUtils.c(false, p0);
    }
    public void L2(String p0){
       u a;
       if (PatchProxy.applyVoidOneRefs(p0, this, g.class, "17")) {
          return;
       }
       a.p(p0, "category");
       a.B();
       a = u.a;
       Objects.requireNonNull(a);
       if (!PatchProxy.applyVoidOneRefs(p0, a, u.class, "3")) {
          a.p(p0, "category");
       }
       return;
    }
    public boolean M2(){
       o obj = PatchProxy.apply(null, this, g.class, "9");
       if (obj != PatchProxyResult.class) {
          return obj.booleanValue();
       }
       obj = n.f.d();
       boolean b = false;
       if (obj != null && (obj.i == Workspace$Type.ALBUM_MOVIE && obj.j != Workspace$Source.AI_CUT_STYLE)) {
          b = true;
       }
    label_002b :
       return b;
    }
    public t N2(EditorSdk2V2$VideoEditorProject p0){
       t ot;
       PatchProxyResult patchProxyRe = PatchProxyResult.class;
       o obj = PatchProxy.applyOneRefs(p0, this, g.class, "4");
       if (obj != patchProxyRe) {
          return obj;
       }
       obj = n.f.d();
       if (obj != null) {
          ot = PatchProxy.applyOneRefs(p0, obj, o.class, "6");
          if (ot != patchProxyRe) {
          }else {
             ot = obj.j((long)(EditorSdk2UtilsV2.getDisplayDuration(p0) * (double)1000.00f), null);
          }
          if (ot != null) {
          label_004f :
             return ot;
          }
       }
       t ot1 = PatchProxy.applyTwoRefs(this, p0, null, c$a.class, "1");
       if (ot1 != patchProxyRe) {
       }else {
          ot1 = t.just(Boolean.TRUE);
          a.o(ot1, "Observable.just\(true\)");
       }
       ot = ot1;
       goto label_004f ;
    }
    public t O2(File p0){
       t ot;
       Object obj = PatchProxy.applyOneRefs(p0, this, g.class, "30");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "stylesFile");
       if (a.a.getBoolean("ai_cut_clear_cache", true)) {
          ot = t.fromCallable(new g$c(p0)).subscribeOn(d.c);
          a.o(ot, "Observable.fromCallable ¡­eOn\(KwaiSchedulers.ASYNC\)");
       }else {
          ot = t.just(Boolean.TRUE);
          a.o(ot, "Observable.just\(true\)");
       }
       return ot;
    }
    public void a(){
       PatchProxy.applyVoid(null, this, g.class, "41");
    }
    public t c2(){
       t obj = PatchProxy.apply(null, this, g.class, "23");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       if (PostExperimentUtils.L0()) {
          return d.a(0x2be267d).c2();
       }
       Object[] objArray = new Object[0];
       g.D().w("KwaiAICutConfig", "downloadLyricAnimMaterialAndFontList not in experiment", objArray);
       obj = t.just(Boolean.TRUE);
       a.o(obj, "Observable.just\(true\)");
       return obj;
    }
    public t d2(){
       Object obj1;
       VideoContext videoContext;
       t ot;
       PatchProxyResult patchProxyRe = PatchProxyResult.class;
       Object[] objArray = null;
       o obj = PatchProxy.apply(objArray, this, g.class, "5");
       if (obj != patchProxyRe) {
          return obj;
       }
       obj = n.f.d();
       if (obj != null) {
          o oo = o.class;
          obj1 = PatchProxy.apply(objArray, obj, oo, "7");
          if (obj1 != patchProxyRe) {
          }else {
             obj1 = PatchProxy.apply(objArray, obj, oo, "16");
             if (obj1 != patchProxyRe) {
             }else {
                boolean b = false;
                if (obj.i() || g7.a(obj.b)) {
                   EditorSdk2V2$VideoEditorProject videoEditorP = obj.g.a0();
                   oo = obj.b;
                   a.m(oo);
                   if (!PatchProxy.applyVoidTwoRefs(videoEditorP, oo, objArray, n0.class, "22")) {
                      a uoa = a.c(oo);
                      if (videoEditorP.trackAssetsSize() != uoa.p()) {
                         PostUtils.D("TrackAssetDraftUtil", "updateAssetDraftClipRange", new RuntimeException("track="+videoEditorP.trackAssetsSize()+",assetDraftCount="+uoa.p()));
                      }else {
                         boolean b2 = uoa.D();
                         if (!b2) {
                            uoa.c0();
                         }
                         for (int i = 0; i < videoEditorP.trackAssetsSize(); i = i + 1) {
                            uoa.n(i).n(videoEditorP.trackAssets(i).isVocal());
                         }
                         uoa.g(b);
                         if (b2) {
                            uoa.c0();
                         }
                      }
                   }
                   o b1 = obj.b;
                   a.m(b1);
                   videoContext = b1.d1();
                   a.o(videoContext, "mDraft!!.videoContext");
                   obj.n(videoContext);
                   String str = obj.g.K0();
                   if (str != null) {
                      obj = obj.b;
                      a.m(obj);
                      j.d.s(obj, str, b);
                   }
                   ot = t.just(Boolean.TRUE);
                   a.o(ot, "Observable.just\(true\)");
                }else {
                   t ot1 = PatchProxy.apply(objArray, obj, oo, "17");
                   if (ot1 != patchProxyRe) {
                   }else {
                      videoContext = new VideoContext();
                      obj.b = DraftFileManager.E().g(obj.i, obj.j, obj.h, videoContext, obj.k);
                      Object[] objArray1 = new Object[b];
                      g.D().w("KwaiAICutProject", "createNewDraft", objArray1);
                      ot1 = DraftFileManager.E().m0(obj.b).observeOn(d.a).flatMap(new q(obj, videoContext));
                      a.o(ot1, "DraftFileManager.getInst¡­rvable.just\(it\)\n        }");
                   }
                   ot = ot1.flatMap(s.b);
                   a.o(ot, "createNewDraft\(\).flatMap¡­servable.just\(true\)\n    }");
                }
                obj1 = ot;
             }
          }
          if (obj1 != null) {
          label_0151 :
             return obj1;
          }
       }
       obj1 = c$a.a(this);
       goto label_0151 ;
    }
    public long e2(){
       Object obj = PatchProxy.apply(null, this, g.class, "32");
       if (obj != PatchProxyResult.class) {
          return obj.longValue();
       }
       return (long)AudioAssetUtils.a(AudioAssetUtils$AssetIdType.MUSIC_AUDIO_ASSET);
    }
    public void f2(){
       if (PatchProxy.applyVoid(null, this, g.class, "8")) {
          return;
       }
       o oo = n.f.d();
       if (oo != null) {
          oo.l();
       }
       return;
    }
    public String g2(){
       String absolutePath;
       PatchProxyResult patchProxyRe = PatchProxyResult.class;
       Object[] objArray = null;
       o obj = PatchProxy.apply(objArray, this, g.class, "14");
       if (obj != patchProxyRe) {
          return obj;
       }
       obj = n.f.d();
       String str = "";
       if (obj != null) {
          o oo = o.class;
          Object obj1 = PatchProxy.apply(objArray, obj, oo, "12");
          if (obj1 != patchProxyRe) {
          }else {
             AICutTheme obj2 = PatchProxy.apply(objArray, obj, oo, "39");
             if (obj2 != patchProxyRe) {
                obj1 = obj2;
             }else {
                c uoc = obj.a();
                a uoa = (uoc != null)? uoc.n0(): objArray;
                if (uoa != null) {
                   DraftFileManager uDraftFileMa = DraftFileManager.E();
                   obj2 = uoa.v();
                   if (obj2 != null) {
                      objArray = obj2.getDirectory();
                   }
                   File uFile = uDraftFileMa.B(objArray, uoa);
                   if (uFile != null) {
                      absolutePath = uFile.getAbsolutePath();
                      if (absolutePath != null) {
                      label_005f :
                         obj1 = absolutePath;
                      }
                   }
                }
             label_005e :
                absolutePath = str;
                goto label_005f ;
             }
          }
          if (obj1 != null) {
             str = obj1;
          }
       }
       return str;
    }
    public long getMaxDuration(){
       Object obj = PatchProxy.apply(null, this, g.class, "12");
       if (obj != PatchProxyResult.class) {
          return obj.longValue();
       }
       return LongVideoLocalProject.e(false);
    }
    public boolean h2(Activity p0){
       Object obj1;
       Object obj = PatchProxy.applyOneRefs(p0, this, g.class, "36");
       if (obj != PatchProxyResult.class) {
          return obj.booleanValue();
       }
       a.p(p0, "activity");
       o oo = n.f.d();
       boolean b = false;
       if (oo != null) {
          obj1 = PatchProxy.applyOneRefs(p0, oo, o.class, "14");
          if (obj1 != PatchProxyResult.class) {
             b = obj1.booleanValue();
          }else {
             a.p(p0, "activity");
          }
       }else {
          obj1 = PatchProxy.applyTwoRefs(this, p0, null, c$a.class, "13");
          if (obj1 != PatchProxyResult.class) {
             b = obj1.booleanValue();
          }else {
             a.p(p0, "activity");
          }
       }
       return b;
    }
    public void i2(AICutMusicInfo p0,i p1){
       if (PatchProxy.applyVoidTwoRefs(p0, p1, this, g.class, "20")) {
          return;
       }
       a.p(p0, "info");
       a.p(p1, "callback");
       g$d uod = new g$d(p1);
       Music music = t.a.b(p0);
       String[] stringArray = e0.b(music.mUrls, music.mUrl);
       a.o(stringArray, "CDNUtil.convertToUrls\(music.mUrls, music.mUrl\)");
       if (j.h(stringArray)) {
          p1.a(new IllegalArgumentException("music is empty"));
          return;
       }else {
          b.a(-905856758).j(music, music.mUrl, music.mUrls, uod, true);
          return;
       }
    }
    public t j1(String p0){
       Object[] obj = PatchProxy.applyOneRefs(p0, this, g.class, "25");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "lyricStyleId");
       if (PostExperimentUtils.L0()) {
          return d.a(0x2be267d).j1(p0);
       }
       obj = new Object[0];
       g.D().w("KwaiAICutConfig", "downloadLyricAnimMaterial not in experiment", obj);
       t ot = t.just(Integer.valueOf(200));
       a.o(ot, "Observable.just\(SINGLE_DOWNLOAD_SUCCESS\)");
       return ot;
    }
    public t j2(String p0,double p1,double p2,AICutMusicInfo p3,double p4,boolean p5){
       Object[] obj;
       t ot;
       object oobject = p0;
       object oobject1 = p3;
       g og = g.class;
       int i = 0;
       if (PatchProxy.isSupport(og)) {
          Object[] objArray = new Object[]{oobject,Double.valueOf(p1),Double.valueOf(p2),oobject1,Double.valueOf(p4),Boolean.valueOf(p5)};
          obj = PatchProxy.apply(objArray, this, og, "26");
          if (obj != PatchProxyResult.class) {
             return obj;
          }
       }else {
          int i1 = this;
       }
       a.p(p0, "lyricStyleId");
       if (!PostExperimentUtils.L0()) {
          obj = new Object[i];
          g.D().w("KwaiAICutConfig", "applyLyricAEAnimation not in experiment", obj);
          ot = t.just(Boolean.FALSE);
          a.o(ot, "Observable.just\(false\)");
          return ot;
       }else {
          g$b uob = new g$b(this, p0, p5, p1, p2, p4);
          ot = t.just(Boolean.TRUE).observeOn(d.c).flatMap(new g$a(oobject1)).observeOn(d.a).flatMap(v12);
          a.o(ot, "Observable.just\(true\)\n  ¡­  }\n          }\n        }");
          return ot;
       }
    }
    public Bitmap k2(){
       Object[] objArray = null;
       o obj = PatchProxy.apply(objArray, this, g.class, "7");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       obj = n.f.d();
       if (obj != null) {
          obj = obj.f;
          if (obj != null) {
             objArray = obj;
          }
       }
       return objArray;
    }
    public void l2(Bitmap p0,Activity p1){
       Object[] objArray2;
       a$a uoa;
       a$a uoa1;
       String str3;
       Intent intent;
       EditorSdk2V2$VideoEditorProject videoEditorP;
       AICutMusicInfo music;
       if (PatchProxy.applyVoidTwoRefs(p0, p1, this, g.class, "31")) {
          return;
       }
       String str = "activity";
       a.p(p1, str);
       n f = n.f;
       o oo = f.d();
       if (oo != null) {
          o oo1 = o.class;
          if (!PatchProxy.applyVoidTwoRefs(p0, p1, oo, oo1, "13")) {
             a.p(p1, str);
             String str1 = j0.f(p1.getIntent(), "tag");
             String str2 = j0.f(p1.getIntent(), "intent_key_share_app");
             Object[] objArray = null;
             if (!PatchProxy.applyVoid(objArray, oo, oo1, "15")) {
                AICutStyle uAICutStyle = oo.g.k();
                if (uAICutStyle == null || a.g(uAICutStyle.mStyleId, "-1")) {
                   c.d().g(new a());
                }else {
                   c.d().g(new a(objArray, uAICutStyle.mStyleId, uAICutStyle.mName));
                }
             }
             oo = oo.g;
             int i = TextUtils.x(str2) ^ 1;
             Objects.requireNonNull(f);
             n on = n.class;
             if (PatchProxy.isSupport(on)) {
                Object[] objArray1 = new Object[]{p1,oo,p0,Boolean.valueOf(i),str1};
                if (!PatchProxy.applyVoid(objArray1, f, on, "19")) {
                }
             }else {
             }
          }
       }
       return;
    }
    public String m2(){
       PatchProxyResult patchProxyRe = PatchProxyResult.class;
       Object[] objArray = null;
       o obj = PatchProxy.apply(objArray, this, g.class, "3");
       if (obj != patchProxyRe) {
          return obj;
       }
       obj = n.f.d();
       if (obj != null) {
          Object obj1 = PatchProxy.apply(objArray, obj, o.class, "4");
          if (obj1 != patchProxyRe) {
             objArray = obj1;
          }else {
             o b = obj.b;
             if (b != null) {
                objArray = j.d(b, false);
             }
          }
          if (objArray != null) {
          label_0034 :
             if (TextUtils.x(objArray)) {
                return "-1";
             }else {
                return objArray;
             }
          }
       }
       objArray = "";
       goto label_0034 ;
    }
    public t n2(QMedia p0){
       Object obj = PatchProxy.applyOneRefs(p0, this, g.class, "13");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "media");
       t ot = h.a().b(p0).C();
       a.o(ot, "MediaTrackAssetManager.g¡­set\(media\).toObservable\(\)");
       return ot;
    }
    public t o2(String p0,int p1){
       g og = g.class;
       if (PatchProxy.isSupport(og)) {
          Object obj = PatchProxy.applyTwoRefs(p0, Integer.valueOf(p1), this, og, "29");
          if (obj != PatchProxyResult.class) {
             return obj;
          }
       }
       a.p(p0, "id");
       t ot = b.a(0x4a533fa).h(p0, p1).retry(1).map(new e()).map(g$g.b);
       a.o(ot, "Singleton.get\(PublicApiS¡­usicInfo\(music\)\n        }");
       return ot;
    }
    public String p2(){
       o obj = PatchProxy.apply(null, this, g.class, "11");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       obj = n.f.d();
       String str = "PRODUCE_AI_CUT";
       if (obj != null && obj.i == Workspace$Type.ALBUM_MOVIE) {
          str = "PRODUCE_TIME_ALBUM";
       }
       return str;
    }
    public File q2(AICutMusicInfo p0){
       CDNUrl[] obj = p0;
       PatchProxyResult patchProxyRe = PatchProxyResult.class;
       StringBuilder obj1 = PatchProxy.applyOneRefs(obj, this, g.class, "18");
       if (obj1 != patchProxyRe) {
          return obj1;
       }
       obj1 = "music";
       a.p(obj, obj1);
       v b = v.b;
       Objects.requireNonNull(b);
       w0 ow0 = w0.class;
       File uFile = PatchProxy.applyOneRefs(obj, b, v.class, "1");
       if (uFile != patchProxyRe) {
       }else {
          a.p(obj, obj1);
          obj1 = p0.getMLocalFilePath();
          if (obj1 != null && new File(obj1).exists()) {
             uFile = new File(obj1);
          }else {
             uFile = null;
             int i = 0;
             if (!v.a) {
                CDNUrl[] mUrls = p0.getMUrls();
                if (mUrls != null) {
                   mUrls = (!mUrls.length)? 1: 0;
                   if (!mUrls) {
                      obj1 = null;
                   label_0061 :
                      if (!obj1) {
                         obj = p0.getMUrls();
                         a.m(obj);
                         CDNUrl mUrl = obj[i].mUrl;
                         a.o(mUrl, "music.mUrls!![0].mUrl");
                         obj1 = PatchProxy.applyOneRefs(mUrl, uFile, ow0, "7");
                         if (obj1 != patchProxyRe) {
                         }else {
                            a.p(mUrl, "url");
                            Uri uri = x0.f(mUrl);
                            a.o(uri, "SafetyUriUtil.parseUriFromString\(url\)");
                            obj1 = a0.c(uri.getPath());
                            a.o(obj1, "DigestUtils.md5Hex\(Safet¡­eUriFromString\(url\).path\)");
                         }
                         File uFile1 = PatchProxy.applyOneRefs(obj1, uFile, ow0, "9");
                         if (uFile1 != patchProxyRe) {
                         }else {
                            a.p(obj1, "cacheKey");
                            uFile1 = d.d.a().a().a(".video_cache");
                            String str = PatchProxy.applyOneRefs(obj1, uFile, ow0, "10");
                            if (str != patchProxyRe) {
                            }else {
                               String str1 = PatchProxy.applyOneRefs(obj1, uFile, ow0, "11");
                               if (str1 != patchProxyRe) {
                               }else {
                                  Object obj2 = obj1;
                                  int i1 = StringsKt__StringsKt.v3(obj2, '.', 0, false, 6, null);
                                  int i2 = StringsKt__StringsKt.v3(obj2, '/', 0, 0, 6, 0);
                                  if (i1 != -1 && (i1 > i2 && ((i1 + 2) + 4) > obj1.length())) {
                                     str1 = obj1.substring((i1 + 1), obj1.length());
                                     a.o(str1, "\(this as java.lang.Strin¡­ing\(startIndex, endIndex\)");
                                  }else {
                                     str1 = "";
                                  }
                               }
                               str = a0.c(obj1);
                               if (TextUtils.x(str1)) {
                                  a.o(str, "name");
                               }else {
                                  str = str+'.'+str1;
                               }
                            }
                            uFile1 = new File(uFile1, str);
                         }
                         if (b.S(uFile1) && uFile1.length() > 0) {
                            uFile = uFile1;
                         }
                      }
                   }
                }
                obj1 = 1;
                goto label_0061 ;
             }
             Object[] objArray = new Object[i];
             g.D().A("KwaiMusicDownloadHelper", "getMusicCacheFile: forbidden using cache style = ["+p0.getMId()+']', objArray);
          }
       }
       return uFile;
    }
    public void r2(){
       String str = "40";
       if (PatchProxy.applyVoid(null, this, g.class, str)) {
          return;
       }
       o oo = n.f.d();
       if (oo != null && !PatchProxy.applyVoid(null, oo, o.class, str)) {
          int i = 0;
          Object[] objArray = new Object[i];
          String str1 = "KwaiAICutProject";
          g.D().w(str1, "doBeforeApplyStyleAndMusic\(\) called", objArray);
          o d = oo.d;
          if (d != null && oo.i()) {
             Object[] objArray1 = new Object[i];
             g.D().w(str1, "doBeforeApplyStyleAndMusic: removeNotSupportEffect", objArray1);
             t a = t.a;
             Objects.requireNonNull(a);
             if (!PatchProxy.applyVoidOneRefs(d, a, t.class, "5")) {
                a.p(d, "newProject");
                d.setOverlappedAE2Effects(null);
                d.setBeautyFilter(null);
                d.setTimeEffect(null);
                Minecraft$VisualEffectParam[] visualEffect = new Minecraft$VisualEffectParam[i];
                d.setVisualEffects(visualEffect);
                Minecraft$MagicTouchOverall[] magicTouchOv = new Minecraft$MagicTouchOverall[i];
                d.setTouchData(magicTouchOv);
                d.setTouchEffects(null);
                Iterator iterator = d.trackAssets().iterator();
                while (iterator.hasNext()) {
                   EditorSdk2V2$TrackAsset trackAsset = iterator.next();
                   Minecraft$LegacyAE2Effect[] legacyAE2Eff = new Minecraft$LegacyAE2Effect[i];
                   trackAsset.setMoreOverlappedAE2Effects(legacyAE2Eff);
                   trackAsset.setOverlappedAE2Effects(null);
                   Minecraft$VisualEffectParam[] visualEffect1 = new Minecraft$VisualEffectParam[i];
                   trackAsset.setVisualEffects(visualEffect1);
                   trackAsset.setBeautyFilter(null);
                   trackAsset.setWesterosBeautyFilterParam(null);
                   trackAsset.setWesterosBodySlimmingParam(null);
                   trackAsset.setWesterosMakeupParam(null);
                   Minecraft$WesterosFaceMagicParam[] westerosFace = new Minecraft$WesterosFaceMagicParam[i];
                   trackAsset.setMoreWesterosFaceMagicParams(westerosFace);
                }
             }
             oo.g.w0(d);
             oo.d = null;
          }
       }
       return;
    }
    public int s2(EditorSdk2V2$VideoEditorProject p0){
       VideoContext videoContext;
       o obj = PatchProxy.applyOneRefs(p0, this, g.class, "39");
       if (obj != PatchProxyResult.class) {
          return obj.intValue();
       }
       a.p(p0, "project");
       obj = n.f.d();
       if (obj != null) {
          c uoc = obj.a();
          if (uoc != null) {
             videoContext = uoc.d1();
          label_002c :
             return h0.d(videoContext, p0);
          }
       }
       videoContext = null;
       goto label_002c ;
    }
    public List t2(EditorSdk2V2$VideoEditorProject p0){
       Object obj = PatchProxy.applyOneRefs(p0, this, g.class, "35");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "videoEditorProject");
       return AudioAssetUtils.b(p0);
    }
    public t u2(String p0){
       Object[] obj = PatchProxy.applyOneRefs(p0, this, g.class, "24");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "lyricStyleId");
       if (PostExperimentUtils.L0()) {
          return d.a(0x2be267d).zG(p0);
       }
       obj = new Object[0];
       g.D().w("KwaiAICutConfig", "downloadFont not in experiment", obj);
       t ot = t.just(Integer.valueOf(200));
       a.o(ot, "Observable.just\(SINGLE_DOWNLOAD_SUCCESS\)");
       return ot;
    }
    public void v2(){
       object oobject;
       Object[] objArray = null;
       if (PatchProxy.applyVoid(objArray, this, g.class, "37")) {
          return;
       }
       String[] a = a.a;
       int len = a.length;
       int i = 0;
       while (true) {
          if (i >= len) {
             return;
          }
          oobject = a[i];
          if (!PatchProxy.applyVoidOneRefs(oobject, objArray, a.class, "1")) {
             PluginDownloadExtension k = PluginDownloadExtension.k;
             k.a(oobject);
             if (!Dva.instance().isLoaded(oobject)) {
                k.s(oobject, 40);
                Dva uDva = Dva.instance();
                a.o(uDva, "Dva.instance\(\)");
                uDva.getPluginInstallManager().j(oobject).c();
                Object[] objArray1 = new Object[0];
                g.D().w("KwaiAICutConfig", "load "+oobject+"success", objArray1);
             }
             if (!Dva.instance().isLoaded(oobject)) {
                break ;
             }
          }
          i = i + 1;
       }
       Object[] objArray2 = new Object[0];
       g.D().t("KwaiAICutConfig", "rxStartAnalyzing: download lib "+oobject+" failed", objArray2);
       throw new AICutGeneratorException(AICutErrorCode.DOWNLOAD_SO_FAILED);
    }
    public boolean w2(){
       Object obj = PatchProxy.apply(null, this, g.class, "38");
       if (obj != PatchProxyResult.class) {
          return obj.booleanValue();
       }
       return w6.a();
    }
    public t x2(){
       t ot;
       PatchProxyResult patchProxyRe = PatchProxyResult.class;
       Object[] objArray = null;
       o obj = PatchProxy.apply(objArray, this, g.class, "6");
       if (obj != patchProxyRe) {
          return obj;
       }
       obj = n.f.d();
       if (obj != null) {
          ot = PatchProxy.apply(objArray, obj, o.class, "8");
          if (ot != patchProxyRe) {
          }else {
             obj.l();
             EditorSdk2V2$VideoEditorProject videoEditorP = obj.g.a0();
             VideoEditorSession videoEditorS = new VideoEditorSession();
             c uoc = a.a();
             a.o(uoc, "AppEnv.get\(\)");
             Application uApplication = uoc.a();
             ThumbnailGenerator thumbnailGen = videoEditorS.createThumbnailGenerator(uApplication, 0x3ff0000000000000, d0.l(videoEditorP), d0.j(videoEditorP), 0x989680);
             if (thumbnailGen != null) {
                d0.w(thumbnailGen, videoEditorP, false);
                ThumbnailGeneratorResult thumbnailSyn = thumbnailGen.getThumbnailSync(thumbnailGen.newRequestBuilder().setUseMetadataRetriever(true).setPositionByPositionIndex(false).build());
                a.o(thumbnailSyn, "result");
                obj.f = thumbnailSyn.getThumbnailBitmap();
                thumbnailGen.release();
                videoEditorS.release();
                ot = t.just(Boolean.TRUE);
                a.o(ot, "Observable.just\(true\)");
             }else {
                ot = t.just(Boolean.TRUE);
                a.o(ot, "Observable.just\(true\)");
             }
          }
          if (ot != null) {
          label_009a :
             return ot;
          }
       }
       ot = c$a.a(this);
       goto label_009a ;
    }
    public void y2(AICutStyle p0,j p1){
       if (PatchProxy.applyVoidTwoRefs(p0, p1, this, g.class, "21")) {
          return;
       }
       String str = "info";
       a.p(p0, str);
       String str1 = "callback";
       a.p(p1, str1);
       w e = w.e;
       Objects.requireNonNull(e);
       if (!PatchProxy.applyVoidTwoRefs(p0, p1, e, w.class, "1")) {
          a.p(p0, str);
          a.p(p1, str1);
          b uob = b.a(-1427269270);
          List resourceUrls = p0.getResourceUrls();
          if (resourceUrls != null) {
             CDNUrl uCDNUrl = resourceUrls.get(0);
             if (uCDNUrl != null) {
                uCDNUrl = uCDNUrl.mUrl;
                if (uCDNUrl != null) {
                label_004a :
                   str = uob.B(uCDNUrl);
                   p0.mLocalDir = str;
                   Object[] objArray = new Object[0];
                   g.D().w(w.a, "downloadStyle: warmUpTemplatePath="+str, objArray);
                   if (str != null && new File(str).exists()) {
                      p1.a(p0, str);
                   }else {
                      e.f(0, p0, p1);
                   }
                }
             }
          }
          str1 = "";
          goto label_004a ;
       }
       return;
    }
    public t z2(List p0){
       Object obj = PatchProxy.applyOneRefs(p0, this, g.class, "42");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "simpleMusics");
       t ot = PatchProxy.applyTwoRefs(this, p0, null, c$a.class, "10");
       if (ot != PatchProxyResult.class) {
       }else {
          a.p(p0, "simpleMusics");
          ot = t.just(CollectionsKt__CollectionsKt.E());
          a.o(ot, "Observable.just\(listOf\(\)\)");
       }
       return ot;
    }
}
