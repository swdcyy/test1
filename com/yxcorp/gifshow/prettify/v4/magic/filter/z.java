package com.yxcorp.gifshow.prettify.v4.magic.filter.z;
import com.yxcorp.gifshow.prettify.v4.magic.filter.j$d;
import com.kwai.feature.post.api.widget.PrettifyDoubleSeekBar$a;
import com.smile.gifmaker.mvps.presenter.PresenterV2;
import n1c.l;
import java.util.ArrayList;
import com.yxcorp.gifshow.prettify.v4.magic.filter.j;
import java.util.List;
import com.yxcorp.gifshow.prettify.v4.magic.filter.q;
import com.yxcorp.gifshow.recycler.fragment.BaseFragment;
import com.yxcorp.gifshow.prettify.v4.magic.filter.z$a;
import java.lang.Object;
import java.lang.Class;
import java.lang.String;
import com.kwai.robust.PatchProxy;
import xyb.a;
import q87.c;
import d1c.c;
import p0c.c;
import k1c.c;
import com.yxcorp.gifshow.prettify.v4.magic.filter.PrettifyConfigView;
import androidx.recyclerview.widget.RecyclerView$Adapter;
import androidx.recyclerview.widget.RecyclerView$i;
import com.kwai.feature.post.api.widget.ScrollToCenterRecyclerView;
import androidx.recyclerview.widget.RecyclerView$l;
import androidx.recyclerview.widget.RecyclerView;
import androidx.recyclerview.widget.g;
import androidx.recyclerview.widget.y;
import d1c.e;
import com.yxcorp.gifshow.video.api.prettify.filter.FilterVideoPlugin$FilterEntranceType;
import com.yxcorp.gifshow.prettify.v4.magic.filter.r;
import com.yxcorp.gifshow.prettify.v4.magic.filter.t;
import erd.g;
import crd.b;
import brd.t;
import o1c.l1;
import com.yxcorp.gifshow.prettify.v4.magic.filter.u;
import o1c.p1;
import o1c.a1;
import eoc.f;
import unc.i;
import o1c.b1;
import o1c.c1;
import com.yxcorp.gifshow.prettify.v4.magic.filter.v;
import o1c.z0;
import o1c.w0;
import com.yxcorp.gifshow.prettify.v4.magic.filter.a0;
import java.lang.Integer;
import androidx.fragment.app.Fragment;
import com.kwai.feature.post.api.componet.prettify.filter.model.FilterConfig;
import im8.f;
import java.util.Objects;
import n1c.d;
import com.kwai.feature.post.api.widget.PrettifyDoubleSeekBar;
import kotlin.Pair;
import java.lang.StringBuilder;
import com.yxcorp.utility.Log;
import e17.i;
import k2b.e0;
import o1c.x0;
import android.view.View;
import com.yxcorp.gifshow.prettify.filter.repo.a;
import androidx.fragment.app.FragmentActivity;
import android.content.Context;
import ekd.r0;
import n1c.g;
import androidx.recyclerview.widget.RecyclerView$LayoutManager;
import androidx.recyclerview.widget.LinearLayoutManager;
import android.view.ViewGroup;
import android.util.Property;
import android.animation.ObjectAnimator;
import android.animation.AnimatorSet;
import android.view.animation.DecelerateInterpolator;
import android.animation.TimeInterpolator;
import android.animation.Animator;
import android.animation.AnimatorSet$Builder;
import n1c.f;
import android.animation.Animator$AnimatorListener;
import android.view.animation.LinearInterpolator;
import com.kwai.robust.PatchProxyResult;
import java.lang.Boolean;
import km8.b;
import android.content.SharedPreferences;
import android.content.SharedPreferences$Editor;
import oe6.g;
import u07.t$a;
import android.app.Activity;
import lnc.a1;
import java.lang.CharSequence;
import u07.f;
import o1c.k1;
import u07.u;
import com.yxcorp.gifshow.prettify.v4.magic.filter.x;
import com.kwai.library.widget.popup.common.PopupInterface;
import com.kwai.library.widget.popup.common.PopupInterface$h;
import com.kwai.library.widget.popup.common.c;
import com.kwai.library.widget.popup.common.c$b;
import lnc.ka;
import java.lang.Math;
import androidx.recyclerview.widget.RecyclerView$ViewHolder;
import com.yxcorp.gifshow.bubble.b;
import com.yxcorp.gifshow.prettify.utils.PrettifyBubbleItem;
import ra9.c;
import com.yxcorp.gifshow.prettify.v4.magic.filter.y;
import com.yxcorp.gifshow.bubble.b$b;
import com.yxcorp.gifshow.bubble.a;
import com.yxcorp.gifshow.bubble.PostBubbleManager;
import java.util.Iterator;
import java.lang.Throwable;
import w46.b;
import java.lang.Float;
import com.kuaishou.client.log.event.packages.nano.ClientEvent$ElementPackage;
import com.google.gson.JsonObject;
import java.lang.Number;
import com.google.gson.JsonElement;
import com.kuaishou.client.log.content.packages.nano.ClientContent$ContentPackage;
import com.kuaishou.client.log.content.packages.nano.ClientContentWrapper$ContentWrapper;
import k2b.u1;
import p0c.e;
import oe6.e;
import com.yxcorp.gifshow.prettify.v4.magic.filter.a0$d;
import com.yxcorp.gifshow.prettify.v4.magic.filter.p;
import com.kwai.feature.post.api.componet.prettify.filter.model.FilterGroup$a;
import android.text.TextUtils;
import mkc.c;
import android.widget.FrameLayout;
import com.yxcorp.gifshow.prettify.v4.magic.filter.Filters;
import i2b.a;
import o1c.h1;
import java.util.concurrent.Callable;
import pm6.k;
import brd.z;
import t45.d;
import com.yxcorp.gifshow.prettify.v4.magic.filter.s;
import o1c.m1;
import com.yxcorp.gifshow.prettify.v4.magic.filter.n;
import o1c.j1;
import java.lang.Iterable;
import ok.o;
import qk.y;
import ekd.m1;
import com.yxcorp.gifshow.tips.TipsContainer;
import android.widget.ImageView;
import android.widget.LinearLayout;
import n0c.b;
import java.util.Collection;
import io.reactivex.subjects.PublishSubject;
import p0c.h;
import android.util.SparseArray;
import o1c.y0;
import android.view.View$OnClickListener;
import o1c.d1;
import java.lang.Runnable;
import android.view.ViewTreeObserver;
import com.yxcorp.gifshow.prettify.v4.magic.filter.z$b;
import android.view.ViewTreeObserver$OnGlobalLayoutListener;
import p0c.d;
import ekd.k1;
import java.lang.System;
import ekd.q$b;
import com.kwai.feature.post.api.componet.prettify.filter.model.RecoFilterGroup;

public class z extends PresenterV2 implements j$d, PrettifyDoubleSeekBar$a	// class@0011d9
{
    public ImageView A;
    public View B;
    public ScrollToCenterRecyclerView C;
    public l D;
    public final List E;
    public final j F;
    public p G;
    public final List H;
    public q I;
    public View J;
    public View K;
    public e L;
    public c M;
    public FilterConfig N;
    public boolean O;
    public PostBubbleManager P;
    public long Q;
    public final RecyclerView$i R;
    public BaseFragment p;
    public PublishSubject q;
    public c r;
    public h s;
    public SparseArray t;
    public w0 u;
    public PublishSubject v;
    public PublishSubject w;
    public PublishSubject x;
    public TipsContainer y;
    public PrettifyConfigView z;

    public void z(){
       super();
       this.D = new l();
       ArrayList uArrayList = new ArrayList();
       this.E = uArrayList;
       this.F = new j(uArrayList);
       uArrayList = new ArrayList();
       this.H = uArrayList;
       this.I = new q(uArrayList, this.p);
       this.O = false;
       this.Q = -1;
       this.R = new z$a(this);
    }
    public void E8(){
       z oz = z.class;
       Object[] objArray = null;
       if (PatchProxy.applyVoid(objArray, this, oz, "3")) {
          return;
       }
       Object[] objArray1 = new Object[0];
       a.D().w("FilterPresenter", "onBind: ", objArray1);
       this.M = this.r.e();
       this.D.a(4, this.r.j);
       if (!PatchProxy.applyVoid(objArray, this, oz, "4")) {
          oz = this.F;
          oz.i = this;
          oz.s1(this.r);
          this.z.f();
          this.z.setSeekBarChangeListener(this);
          this.z.setupSeekBarMode(1);
          this.z.setAdapter(this.F);
          this.F.F0(this.R);
          if (this.r.b()) {
             RecyclerView$l itemAnimator = this.z.getFilterItemList().getItemAnimator();
             if (itemAnimator instanceof g) {
                itemAnimator.K(0);
             }
          }
       }
       this.L = this.r.f();
       this.F.n = this.M.r();
       this.F.s1(this.r);
       this.Z8();
       this.X7(this.q.subscribe(new r(this), t.b));
       this.X7(this.v.subscribe(new l1(this), u.b));
       this.X7(f.a(p1.class, new a1(this)));
       this.X7(f.a(i.class, new b1(this)));
       this.X7(this.w.subscribe(new c1(this), v.b));
       this.X7(this.x.subscribe(new z0(this)));
       return;
    }
    public void I7(int p0,w0 p1,a0 p2){
       if (PatchProxy.isSupport(z.class) && PatchProxy.applyVoidThreeRefs(Integer.valueOf(p0), p1, p2, this, z.class, "28")) {
          return;
       }
       int i = 0;
       Object[] objArray = new Object[i];
       a.D().w("FilterPresenter", "onFilterItemSelected ", objArray);
       if (this.p.isDetached()) {
          return;
       }
       z tM = this.M;
       if (p1.c() == -111) {
          i = true;
       }
       tM.q(i);
       this.W8(p1, p0);
       this.M.o(p1.a());
       this.M.d().set(Integer.valueOf(p0));
       this.L.Q0(p0, p1.a(), p2);
       return;
    }
    public void J8(){
       Object[] objArray = null;
       if (PatchProxy.applyVoid(objArray, this, z.class, "51")) {
          return;
       }
       z tF = this.F;
       Objects.requireNonNull(tF);
       if (!PatchProxy.applyVoid(objArray, tF, j.class, "40")) {
          tF.q.b();
          tF.Z0(true);
       }
       this.F.I0(this.R);
       return;
    }
    public void N2(PrettifyDoubleSeekBar p0,int p1){
    }
    public final void P8(w0 p0){
       if (PatchProxy.applyVoidOneRefs(p0, this, z.class, "33")) {
          return;
       }
       Pair pair = this.M.c(p0.a());
       this.l9();
       this.F.v1();
       this.M.d().set(Integer.valueOf(this.F.k1()));
       int i = pair.getFirst().intValue();
       int i1 = pair.getSecond().intValue();
       boolean b = this.a9();
       Log.b("FilterPresenter", "cancelCollectFilter removePosition: "+i+" originPosition: "+i1);
       if (i1 >= 0 && !b) {
          this.F.l0(i1);
       }
       if (i >= 0 && b) {
          Log.b("FilterPresenter", "notifyItemRemoved: "+i);
          this.F.t0(i);
       }
       i.a(R.style.arg_RES_7f11066a, 0x7f10072a);
       x0.d(false, p0, this.p);
       return;
    }
    public void Q0(View p0,int p1,w0 p2){
       int i;
       a uoa = a.class;
       z oz = z.class;
       if (PatchProxy.isSupport(oz) && PatchProxy.applyVoidThreeRefs(p0, Integer.valueOf(p1), p2, this, z.class, "29")) {
          return;
       }
       String str = "FilterPresenter";
       Log.b(str, "onFilterItemLongClick: "+p2.d());
       if (!p2.a().isDivider() && !p2.a().isEmptyFilter()) {
          FragmentActivity activity = this.p.getActivity();
          if (activity != null && !r0.d(activity)) {
             i.a(R.style.arg_RES_7f110668, 0x7f1038e7);
             return;
          }else {
             float[] uofloatArray = 1;
             i = 0;
             if (!p2.i()) {
                if (!PatchProxy.isSupport(oz) || !PatchProxy.applyVoidTwoRefs(p2, Integer.valueOf(p1), this, oz, "32")) {
                   this.M.e(p2.a());
                   this.l9();
                   this.F.v1();
                   this.M.d().set(Integer.valueOf(this.F.k1()));
                   this.F.l0(p1);
                   if (this.a9()) {
                      Log.b(str, "notifyItemInserted: 0");
                      this.F.n0(i);
                   }
                   x0.d(uofloatArray, p2, this.p);
                }
                z tC = this.C;
                g og = g.class;
                if (!PatchProxy.applyVoidOneRefs(tC, null, og, "1")) {
                   LinearLayoutManager layoutManage = tC.getLayoutManager();
                   if (layoutManage != null && layoutManage.i0() <= 0) {
                      View view = tC.getChildAt(i).findViewById(R.id.collect_icon);
                      if (view != null) {
                         view.setVisibility(i);
                         view.setScaleX(0);
                         view.setScaleY(0);
                         view.setAlpha(0x3f800000);
                         int i1 = 2;
                         if (!PatchProxy.applyVoidOneRefs(view, null, og, "2")) {
                            AnimatorSet uAnimatorSet = new AnimatorSet();
                            uAnimatorSet.setDuration(500);
                            uAnimatorSet.setInterpolator(new DecelerateInterpolator(0x3fc00000));
                            uAnimatorSet.play(ObjectAnimator.ofFloat(view, View.SCALE_X, new float[i1]{0,0x3f800000})).with(ObjectAnimator.ofFloat(view, View.SCALE_Y, new float[i1]{0,0x3f800000}));
                            uAnimatorSet.start();
                         }
                         if (!PatchProxy.applyVoidOneRefs(view, null, og, "3")) {
                            ObjectAnimator objectAnimat = ObjectAnimator.ofFloat(view, View.ALPHA, new float[i1]{0x3f800000,0});
                            objectAnimat.addListener(new f(view));
                            objectAnimat.setDuration(200);
                            objectAnimat.setStartDelay(500);
                            objectAnimat.setInterpolator(new LinearInterpolator());
                            objectAnimat.start();
                         }
                      }
                   }
                }
             }else {
                t$a obj = PatchProxy.apply(null, null, uoa, "30");
                boolean b = (obj != PatchProxyResult.class)? obj.booleanValue(): b.b("DefaultPreferenceHelper").getBoolean("filter_cancel_popup", i);
                if (!b) {
                   if (!PatchProxy.isSupport(uoa) || !PatchProxy.applyVoidOneRefs(Boolean.TRUE, null, uoa, "31")) {
                      g.a(b.b("DefaultPreferenceHelper").edit().putBoolean("filter_cancel_popup", uofloatArray));
                   }
                   if (activity != null) {
                      obj = new t$a(activity);
                      obj.X0(a1.p(R.string.arg_RES_7f1004b8));
                      obj.T0(a1.p(R.string.arg_RES_7f1007e2));
                      obj = f.e(obj);
                      obj.u0(new k1(this, p2));
                      obj.R0(a1.p(R.string.cancel));
                      obj.t0(x.b);
                      obj.Y(PopupInterface.a);
                   }
                }else {
                   this.P8(p2);
                }
             }
          label_01ec :
             if (activity != null) {
                ka.a(activity, 100);
             }
          }
       }
       return;
    }
    public void R8(){
       if (PatchProxy.applyVoid(null, this, z.class, "13")) {
          return;
       }
       if (this.getActivity() == null) {
          return;
       }
       ScrollToCenterRecyclerView filterItemLi = this.z.getFilterItemList();
       int i = Math.min(2, (filterItemLi.getChildCount() - 1));
       int firstItemVis = this.z.getFirstItemVisible();
       while (i >= 0 && firstItemVis < this.E.size()) {
          if (!this.E.get(firstItemVis).a().isDivider()) {
             i = i - 1;
             if (i < 0) {
                break ;
             }
          }
          firstItemVis = firstItemVis + 1;
       }
       RecyclerView$ViewHolder viewHolder = filterItemLi.findViewHolderForAdapterPosition(firstItemVis);
       if (viewHolder == null) {
          return;
       }else {
          viewHolder = viewHolder.itemView;
          z tP = this.P;
          if (tP == null) {
             Object[] objArray = new Object[0];
             a.D().w("FilterPresenter", "post bubble manager is null", objArray);
             return;
          }else {
             b uob = new b(PrettifyBubbleItem.COLLECT_FILTER);
             uob.b(viewHolder);
             uob.k(y.a);
             tP.n(uob);
             return;
          }
       }
    }
    public final w0 S8(int p0){
       Iterator obj;
       w0 ow0;
       z oz = z.class;
       if (PatchProxy.isSupport(oz)) {
          obj = PatchProxy.applyOneRefs(Integer.valueOf(p0), this, oz, "42");
          if (obj != PatchProxyResult.class) {
             return obj;
          }
       }
       obj = this.E.iterator();
       while (true) {
          if (!obj.hasNext()) {
             return new w0(FilterConfig.getEmpty());
          }
          ow0 = obj.next();
          if (p0 == ow0.a().mFilterId) {
             FilterConfig uFilterConfi = (ow0.c == -111)? 1: null;
             if (!uFilterConfi) {
                break ;
             }
          }
       }
       return ow0;
    }
    public void U1(PrettifyDoubleSeekBar p0,int p1){
       FilterConfig uFilterConfi;
       z oz = z.class;
       if (PatchProxy.isSupport(oz) && PatchProxy.applyVoidTwoRefs(p0, Integer.valueOf(p1), this, oz, "25")) {
          return;
       }
       if (this.p.isDetached()) {
          return;
       }
       if (this.F.k1() < 0) {
          return;
       }
       w0 ow0 = this.F.j1();
       if (ow0 == null) {
          Object[] objArray = new Object[0];
          a.D().u("FilterPresenter", new Throwable("Progress "+p1), objArray);
          return;
       }else if(ow0.k()){
          uFilterConfi = ow0.f();
          if (uFilterConfi != null) {
             uFilterConfi.mIntensity = (float)p1 / (float)p0.getMaxProgress();
             this.L.K(uFilterConfi);
          }
       }else {
          uFilterConfi = ow0.a();
          uFilterConfi.mIntensity = (float)p1 / (float)p0.getMaxProgress();
          this.L.K(uFilterConfi);
       }
       return;
    }
    public void V1(PrettifyDoubleSeekBar p0,int p1){
       float f;
       z oz = z.class;
       if (PatchProxy.isSupport(oz) && PatchProxy.applyVoidTwoRefs(p0, Integer.valueOf(p1), this, oz, "26")) {
          return;
       }
       if (this.F.k1() < 0) {
          return;
       }
       w0 ow0 = this.F.j1();
       if (ow0.k() && ow0.f() != null) {
          FilterConfig uFilterConfi = this.M.v(ow0.f().mFilterId);
          FilterConfig uFilterConfi1 = ow0.f();
          uFilterConfi = (uFilterConfi != null)? uFilterConfi.mIntensity: 0;
          z tp = this.p;
          if (!PatchProxy.isSupport(x0.class) || !PatchProxy.applyVoidThreeRefs(uFilterConfi1, Float.valueOf(uFilterConfi), tp, null, x0.class, "8")) {
             ClientEvent$ElementPackage uElementPack = new ClientEvent$ElementPackage();
             uElementPack.action2 = "AI_FILTER_INTENSITY_SLIDE";
             JsonObject jsonObject = new JsonObject();
             jsonObject.a0("filter_id", Integer.valueOf(uFilterConfi1.mFilterId));
             jsonObject.c0("filter_name", uFilterConfi1.getDisplayName());
             jsonObject.a0("ref_value", Float.valueOf(uFilterConfi));
             jsonObject.a0("value", Float.valueOf(uFilterConfi1.mIntensity));
             uElementPack.params = jsonObject.toString();
             u1.M("", tp, 1, uElementPack, null, null);
          }
       }
    label_00a7 :
       this.L.o1(ow0.a());
       return;
    }
    public final boolean V8(FilterConfig p0){
       int i1;
       PatchProxyResult patchProxyRe = PatchProxyResult.class;
       z oz = z.class;
       z obj = PatchProxy.applyOneRefs(p0, this, oz, "41");
       if (obj != patchProxyRe) {
          return obj.booleanValue();
       }
       obj = this.r;
       e uoe = (obj == null)? null: obj.i;
       if (uoe != null && (uoe.c() != 4 || !e.M())) {
          return false;
       }else {
          e.A0(false);
          int i = (int)uoe.a();
          w0 ow0 = this.S8(i);
          if (ow0.a().isEmptyFilter()) {
             Object[] objArray = new Object[false];
             a.D().t("FilterPresenter", "wrong filter id "+i, objArray);
             return false;
          }else if(uoe.b()){
             this.e9(ow0, a0.i(), true, true);
          }else {
             w0 ow01 = PatchProxy.applyOneRefs(p0, this, oz, "43");
             if (ow01 != patchProxyRe) {
             }else if(p0 == null){
                ow01 = new w0(FilterConfig.getEmpty());
             }else if(p0.isReco()){
                Iterator iterator = this.E.iterator();
                while (true) {
                   if (iterator.hasNext()) {
                      w0 ow02 = iterator.next();
                      if (ow02.k()) {
                         ow01 = ow02;
                      }
                   }
                }
             }
             ow01 = this.S8(p0.mFilterId);
             if (!PatchProxy.isSupport(oz) || !PatchProxy.applyVoidTwoRefs(ow01, Boolean.FALSE, this, oz, "16")) {
                p0 = ow01.a();
                if (p0 != null && ow01.e() >= 0) {
                   Object obj1 = PatchProxy.applyOneRefs(p0, this, oz, "7");
                   if (obj1 != patchProxyRe) {
                      i1 = obj1.intValue();
                   }else {
                      int i2 = -1;
                      int i3 = 0;
                      while (i3 < this.E.size()) {
                         if (this.E.get(i3).a().mFilterId == p0.mFilterId) {
                            i2 = i3;
                         }
                         i3 = i3 + 1;
                      }
                      if (i2 >= 0) {
                         this.E.get(i2).a().mIntensity = p0.mIntensity;
                      }
                      i1 = i2;
                   }
                   if (i1 >= 0) {
                      this.e9(ow01, a0.i(), false, false);
                   }
                }
             }
             this.z.m(ow0.e());
          }
          return true;
       }
    }
    public final void W8(w0 p0,int p1){
       FilterConfig uFilterConfi1;
       z oz = z.class;
       if (PatchProxy.isSupport(oz) && PatchProxy.applyVoidTwoRefs(p0, Integer.valueOf(p1), this, oz, "34")) {
          return;
       }
       FilterConfig uFilterConfi = p0.a();
       if (p0.k()) {
          uFilterConfi = p0.f();
       }
       if (this.p.isVisible()) {
          boolean b = this.b9(uFilterConfi);
          if (!b) {
             this.z.g();
          }else if(uFilterConfi.isReco()){
             uFilterConfi1 = this.M.v(uFilterConfi.mFilterId);
          }else {
             uFilterConfi1 = this.M.z(uFilterConfi.mFilterId);
          }
          if (uFilterConfi1 != null) {
             this.z.setDefaultIndicatorProgress(uFilterConfi1.mIntensity);
             this.z.setSeekBarProgress(uFilterConfi.mIntensity);
             this.z.o();
             this.z.m(Math.max(p1, 0));
          }else {
             this.z.g();
          }
          z tG = this.G;
          if (tG != null && b) {
             Objects.requireNonNull(tG);
             if (!PatchProxy.applyVoidOneRefs(p0, tG, p.class, "4")) {
                uFilterConfi = p0.a();
                if (uFilterConfi != null && !uFilterConfi.isEmptyFilter()) {
                   if (uFilterConfi.isReco()) {
                      p0 = tG.a.i1();
                   }
                   if (p0 != null && (tG.d.Z0() < 0 || (tG.d.Y0().a != p0.c() || !TextUtils.equals(tG.d.Y0().b, p0.b())))) {
                      tG.a(p0.c(), p0.b());
                   }
                }
             }
          }
       }
    label_00d7 :
       return;
    }
    public final void X8(){
       Object[] objArray = null;
       if (PatchProxy.applyVoid(objArray, this, z.class, "38")) {
          return;
       }
       z tJ = this.J;
       if (tJ != null && !tJ.getVisibility()) {
          c.c(this.y, this.J);
          this.J = objArray;
       }
       this.y.setVisibility(8);
       return;
    }
    public final void Y8(){
       if (PatchProxy.applyVoid(null, this, z.class, "40")) {
          return;
       }
       z tK = this.K;
       if (tK != null && !tK.getVisibility()) {
          c.c(this.y, this.K);
          this.K = null;
       }
       return;
    }
    public final void Z8(){
       z oz = z.class;
       Object[] objArray = null;
       if (PatchProxy.applyVoid(objArray, this, oz, "9")) {
          return;
       }
       if (!Filters.hasFilterConfigs(this.M.r())) {
          if (!PatchProxy.applyVoid(objArray, this, oz, "37")) {
             this.y.setVisibility(0);
             if (this.J == null) {
                this.J = a.a(this.getContext(), 0x7f0d1617);
             }
             c.i(this.y, this.J);
          }
          this.Y8();
       }
       this.X7(t.fromCallable(new h1(this)).subscribeOn(k.a).observeOn(d.a).subscribe(new s(this), new m1(this)));
       return;
    }
    public boolean a9(){
       Object obj = PatchProxy.apply(null, this, z.class, "31");
       if (obj != PatchProxyResult.class) {
          return obj.booleanValue();
       }
       boolean b = (this.I.Z0() >= 0 && this.I.Y0().a == -111)? true: false;
       return b;
    }
    public final boolean b9(FilterConfig p0){
       Object obj = PatchProxy.applyOneRefs(p0, this, z.class, "24");
       if (obj != PatchProxyResult.class) {
          return obj.booleanValue();
       }
       boolean b = (p0 != null && (!p0.isEmptyFilter() && n.l(p0)))? true: false;
       return b;
    }
    public final void c9(boolean p0){
       z oz = z.class;
       if (PatchProxy.isSupport(oz) && PatchProxy.applyVoidOneRefs(Boolean.valueOf(p0), this, oz, "18")) {
          return;
       }
       w0 ow0 = this.M.a();
       if (ow0 != null && !ow0.a().isEmptyFilter()) {
          z tF = this.F;
          List list = (ow0.c() == -111)? this.M.l(): this.M.g();
          tF.t1(list);
       }
       int i = -1;
       int i1 = (ow0 != null)? y.o(this.E, new j1(ow0)): -1;
       if (i1 < 0) {
          this.F.a1();
          this.L.Q0(i, FilterConfig.getEmpty(), a0.i());
          x0.f(FilterConfig.getEmpty(), p0);
          return;
       }else if(PatchProxy.isSupport(oz) && PatchProxy.applyVoidOneRefs(Integer.valueOf(i1), this, oz, "21")){
          this.F.p1(i1, a0.i());
          this.z.m(i1);
       }
       if (p0) {
          this.L.i();
       }else {
          this.L.q();
       }
       x0.f(this.F.g1(i1).a(), p0);
       return;
    }
    public final void d9(w0 p0){
       z tF;
       Iterator obj;
       j oj = j.class;
       if (PatchProxy.applyVoidOneRefs(p0, this, z.class, "23")) {
          return;
       }
       Object[] objArray = null;
       FilterConfig uFilterConfi = p0.a();
       int i = -1;
       if (!this.b9(uFilterConfi)) {
          tF = this.F;
          Objects.requireNonNull(tF);
          obj = PatchProxy.apply(objArray, tF, oj, "31");
          if (obj != PatchProxyResult.class) {
             obj.booleanValue();
          }else {
             oj = tF.j;
             tF.j = i;
             tF.k = objArray;
             tF.l = i;
             tF.m0(oj, Boolean.FALSE);
          }
       }else if(uFilterConfi.isReco()){
          tF = this.F;
          Objects.requireNonNull(tF);
          if (!PatchProxy.applyVoidOneRefs(p0, tF, oj, "33")) {
             tF.m0(tF.j, Boolean.FALSE);
             if (p0.h() >= 0) {
                tF.j = p0.e();
                tF.k = p0;
             }else {
                tF.j = i;
                tF.k = objArray;
             }
             tF.m0(tF.j, Boolean.TRUE);
          }
       }else {
          z tF1 = this.F;
          Objects.requireNonNull(tF1);
          if (!PatchProxy.applyVoidOneRefs(p0, tF1, oj, "32")) {
             tF1.m0(tF1.j, Boolean.FALSE);
             tF1.j = i;
             tF1.k = p0;
             obj = tF1.g.iterator();
             while (true) {
                if (obj.hasNext()) {
                   w0 ow0 = obj.next();
                   if ((p0.d()).equals(ow0.d())) {
                      tF1.j = ow0.e();
                      tF1.k = ow0;
                   }
                }
                tF1.m0(tF1.j, Boolean.TRUE);
                break ;
             }
          }
       }
       this.W8(p0, this.F.k1());
       return;
    }
    public void doBindView(View p0){
       if (PatchProxy.applyVoidOneRefs(p0, this, z.class, "2")) {
          return;
       }
       this.z = m1.f(p0, 0x7f0a0e7e);
       this.y = m1.f(p0, 0x7f0a0e92);
       this.C = m1.f(p0, 0x7f0a0e72);
       this.A = m1.f(p0, 0x7f0a0741);
       z tz = this.z;
       if (tz != null) {
          this.B = tz.findViewById(0x7f0a2dd8);
       }
       return;
    }
    public final void e9(w0 p0,a0 p1,boolean p2,boolean p3){
       if (PatchProxy.isSupport(z.class) && PatchProxy.applyVoidFourRefs(p0, p1, Boolean.valueOf(p2), Boolean.valueOf(p3), this, z.class, "22")) {
          return;
       }
       this.F.q1(p0, p1, p2);
       if (this.p.isVisible() && p3) {
          this.z.m(p0.e());
       }
       return;
    }
    public void g0(float p0){
       z oz = z.class;
       if (PatchProxy.isSupport(oz) && PatchProxy.applyVoidOneRefs(Float.valueOf(p0), this, oz, "48")) {
          return;
       }
       oz = this.r;
       if (oz != null && oz.h() != null) {
          this.r.h().d(p0);
       }
       return;
    }
    public final void h9(){
       Object[] objArray = null;
       if (PatchProxy.applyVoid(objArray, this, z.class, "15")) {
          return;
       }
       if (this.C != null) {
          this.H.clear();
          this.H.addAll(this.M.t());
       }
       w0 ow0 = this.M.a();
       z tF = this.F;
       List list = (ow0 != null && ow0.c() == -111)? this.M.l(): this.M.g();
       tF.t1(list);
       if (ow0 != null) {
          objArray = ow0.a();
       }
       if (!this.V8(objArray) && !this.D.b()) {
          if (ow0 == null) {
             ow0 = new w0(FilterConfig.getEmpty());
          }
          this.d9(ow0);
       }
       return;
    }
    public void j8(){
       if (PatchProxy.applyVoid(null, this, z.class, "1")) {
          return;
       }
       this.p = this.r8("FRAGMENT");
       this.q = this.r8("HIDDEN_CHANGED");
       this.r = this.r8("FILTER_OPTION");
       this.s = this.t8("PRETTIFY_OPTION");
       this.t = this.r8("FILTER_SHOWN_ITEMS");
       this.v = this.r8("FILTER_PAUSE");
       this.w = this.r8("FILTER_SWITCH");
       this.x = this.r8("FILTER_REFRESH_SELECT");
       this.P = this.r8("BUBBLE_MANAGER");
       return;
    }
    public final void j9(){
       if (PatchProxy.applyVoid(null, this, z.class, "39")) {
          return;
       }
       if (this.K == null) {
          View view = a.a(this.getContext(), R.layout.arg_RES_7f0d1616);
          this.K = view;
          view.setOnClickListener(new y0(this));
       }
       c.i(this.y, this.K);
       return;
    }
    public final void k9(){
       int i;
       a uoa = a.class;
       Object[] objArray = null;
       if (PatchProxy.applyVoid(objArray, this, z.class, "12")) {
          return;
       }
       if (!this.r.b()) {
          return;
       }
       if (this.O != null) {
          return;
       }
       if (PrettifyBubbleItem.COLLECT_FILTER.couldShow()) {
          z tE = this.E;
          Object obj = PatchProxy.applyOneRefs(tE, objArray, uoa, "27");
          if (obj != PatchProxyResult.class) {
             i = obj.intValue();
          }else {
             int i1 = 0;
             Iterator iterator = tE.iterator();
             while (iterator.hasNext()) {
                if (iterator.next().c() == -111) {
                   i1 = i1 + 1;
                }
             }
             i = i1;
          }
          if (i) {
             if (!PatchProxy.isSupport(uoa) || !PatchProxy.applyVoidOneRefs(Boolean.TRUE, objArray, uoa, "29")) {
                g.a(b.b("DefaultPreferenceHelper").edit().putBoolean("filter_collect_guide_bubble", true));
             }
             return;
          }else {
             ScrollToCenterRecyclerView filterItemLi = this.z.getFilterItemList();
             if (filterItemLi.getWidth() && (!filterItemLi.getHeight() || !filterItemLi.getChildCount())) {
                filterItemLi.getViewTreeObserver().addOnGlobalLayoutListener(new z$b(this, filterItemLi));
             }else {
                filterItemLi.postDelayed(new d1(this), 200);
             }
          }
       }
       return;
    }
    public final void l9(){
       if (PatchProxy.applyVoid(null, this, z.class, "30")) {
          return;
       }
       this.E.clear();
       z tE = this.E;
       List list = (this.a9())? this.M.l(): this.M.g();
       tE.addAll(list);
       return;
    }
    public final void m9(){
       if (PatchProxy.applyVoid(null, this, z.class, "44")) {
          return;
       }
       if (this.p.isVisible() && this.z != null) {
          z ts = this.s;
          if (ts != null && ts.g().i == null) {
             return;
          }else {
             int firstItemVis = this.z.getFirstItemVisible();
             int lastItemVisi = this.z.getLastItemVisible();
             while (firstItemVis >= 0 && (firstItemVis <= lastItemVisi && firstItemVis < this.F.getItemCount())) {
                if (this.F.g1(firstItemVis).k()) {
                   this.u = this.F.g1(firstItemVis);
                   break ;
                }
                firstItemVis = firstItemVis + 1;
             }
          }
       }
       return;
    }
    public void o(boolean p0){
       z oz = z.class;
       if (PatchProxy.isSupport(oz) && PatchProxy.applyVoidOneRefs(Boolean.valueOf(p0), this, oz, "49")) {
          return;
       }
       if (this.Q - -1) {
          oz = this.r;
          if (oz != null && oz.h() != null) {
             this.r.h().c(1);
          }
          long l = k1.t(this.Q);
          z tp = this.p;
          int i = (p0)? 7: 8;
          x0.i(l, tp, i);
          this.Q = -1;
       }
       return;
    }
    public void t(boolean p0){
       z oz = z.class;
       if (PatchProxy.isSupport(oz) && PatchProxy.applyVoidOneRefs(Boolean.valueOf(p0), this, oz, "47")) {
          return;
       }
       this.Q = System.currentTimeMillis();
       oz = this.r;
       if (oz != null && oz.h() != null) {
          this.r.h().b(1, p0);
       }
       return;
    }
    public List t6(q$b p0){
       Object obj = PatchProxy.applyOneRefs(p0, this, z.class, "46");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       int firstItemVis = this.z.getFirstItemVisible();
       int lastItemVisi = this.z.getLastItemVisible();
       ArrayList uArrayList = new ArrayList();
       while (firstItemVis <= lastItemVisi) {
          RecyclerView$ViewHolder viewHolder = this.z.getFilterItemList().findViewHolderForAdapterPosition(firstItemVis);
          if (viewHolder != null && p0.a(viewHolder)) {
             uArrayList.add(viewHolder);
          }
          firstItemVis = firstItemVis + 1;
       }
       return uArrayList;
    }
    public void v(){
       if (PatchProxy.applyVoid(null, this, z.class, "50")) {
          return;
       }
       if (this.Q - -1) {
          z tr = this.r;
          if (tr != null && tr.h() != null) {
             this.r.h().c(1);
          }
          x0.i(k1.t(this.Q), this.p, 9);
          this.Q = -1;
       }
       return;
    }
    public void w5(View p0,int p1,w0 p2){
       if (PatchProxy.isSupport(z.class) && PatchProxy.applyVoidThreeRefs(p0, Integer.valueOf(p1), p2, this, z.class, "27")) {
          return;
       }
       this.m9();
       if (this.t.indexOfValue(p2.a()) < 0 && !p2.a() instanceof RecoFilterGroup) {
          this.t.put(p1, p2.a());
       }
       this.L.D0(p0, p1, p2.a());
       return;
    }
}
