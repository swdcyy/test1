package o69.c;
import i69.f;
import k69.e;
import java.util.List;
import java.lang.Object;
import java.lang.String;
import kotlin.jvm.internal.a;
import crd.a;
import java.util.LinkedHashSet;
import java.util.LinkedHashMap;
import java.util.ArrayList;
import com.kwai.kve.AlbumType;
import android.app.Application;
import o56.a;
import android.content.Context;
import com.kwai.plugin.dva.util.CpuAbiUtils;
import java.util.Iterator;
import java.lang.Iterable;
import com.yxcorp.gifshow.models.QMedia;
import kotlin.Pair;
import brd.t;
import com.kwai.robust.PatchProxyResult;
import java.lang.Class;
import com.kwai.robust.PatchProxy;
import java.lang.Boolean;
import o69.a;
import com.yxcorp.gifshow.aicut.api.AICutStyle;
import com.yxcorp.gifshow.aicut.api.AICutErrorCode;
import java.lang.Double;
import i69.d;
import j69.a;
import j69.c;
import com.kwai.video.minecraft.model.EditorSdk2V2$VideoEditorProject;
import com.kwai.video.minecraft.model.EditorSdk2UtilsV2;
import com.yxcorp.gifshow.aicut.api.AICutMusicInfo;
import o69.c$a;
import erd.o;
import o69.c$b;
import h69.g;
import java.lang.StringBuilder;
import q87.c;
import java.util.Map;
import o69.o2;
import o69.c$c;
import java.util.concurrent.Callable;
import t45.d;
import brd.z;
import o69.c$d;
import o69.c$e;
import o69.n;
import erd.g;
import o69.c$f;
import o69.c$g;
import o69.c$h;
import o69.c$i;
import erd.a;
import o69.c$j;
import o69.c$k;
import crd.b;
import o69.c$r;
import o69.c$s;
import kotlin.collections.CollectionsKt__CollectionsKt;
import java.io.File;
import i69.a;
import java.util.Collection;
import o69.u0;
import ssd.e;
import kotlin.collections.CollectionsKt___CollectionsKt;
import o69.q1;
import java.util.Objects;
import java.lang.Thread;
import android.os.Looper;
import java.lang.RuntimeException;
import com.kwai.video.ksmemorykit.EditorSmartClipTask;
import o69.c$t;
import o69.c$u;
import o69.c$v;
import o69.c$w;
import o69.c$x;
import o69.c$y;
import o69.n2;
import java.lang.Integer;
import java.lang.System;
import java.lang.Long;
import s69.f;
import j69.b;
import com.kuaishou.client.log.content.packages.nano.ClientContent$LocalIntelligentAlbumPackage;
import o69.c$a0;
import o69.c$b0;
import i69.f$a;
import o69.a1;
import o69.c$c0;
import o69.c$d0;
import kotlin.jvm.internal.Ref$ObjectRef;
import ekd.q;
import java.lang.CharSequence;
import o69.c$e0;
import o69.c$f0;
import o69.f1;
import java.lang.IllegalArgumentException;
import java.lang.Throwable;
import o69.g1;
import o69.c1;
import o69.e1;
import com.kwai.video.ksmemorykit.EditorMemoryParamsImpl;
import o69.d2$b;
import o69.d2;
import o69.c$g0;
import o69.c$h0;
import brd.w;
import o69.c$k0;
import o69.c$i0;
import o69.c$j0;
import com.yxcorp.utility.TextUtils;
import s69.i;
import nsd.u;
import o69.c$l;
import brd.a0;
import o69.c$m;
import o69.c$n;
import o69.c$o;
import o69.c$p;
import o69.c$q;
import com.kwai.video.minecraft.model.EditorSdk2V2$AudioAsset;
import o69.q0;
import o69.r0;
import java.util.Set;
import o69.e;
import k69.e$a;
import o69.f;
import w46.b;
import o69.n0;
import o69.o0;
import o69.s0;
import w46.a;
import w46.a$a;
import com.kwai.feature.post.log.PostCommonBiz;
import oa9.b;
import com.yxcorp.gifshow.biz.monitor.log.BizLogger;
import o69.c$l0;
import o69.c$m0;
import o69.c$y0;
import o69.c$z0;
import o69.c$a1;
import o69.c$b1;
import o69.c$c1;
import o69.c$d1;
import o69.c$e1;
import o69.c$f1;
import o69.c$g1;
import o69.c$p0;
import o69.c$q0;
import o69.c$r0;
import o69.c$s0;
import o69.c$t0;
import o69.c$u0;
import o69.c$v0;
import o69.c$w0;
import o69.c$x0;
import java.util.concurrent.TimeUnit;
import o69.c$n0;
import o69.c$o0;
import o69.c$z;
import o69.m1;
import s69.d;
import com.kwai.video.ksmemorykit.EditorMemoryAsset;
import com.kwai.video.editorsdk2.kve.EditorKveAsset;
import s69.g;
import java.util.regex.Pattern;
import java.util.regex.Matcher;
import com.kwai.video.ksmemorykit.EditorSmartClipResult;
import com.kwai.video.editorsdk2.model.ImmutableArray;
import com.kwai.video.minecraft.model.EditorSdk2V2$TrackAsset;
import com.kwai.video.minecraft.model.EditorSdk2V2$TimeRangeImpl;
import usd.q;
import qrd.l1;
import com.kwai.video.minecraft.model.EditorSdk2V2$TimeRangeV2;
import trd.u;
import o69.c$h1;
import o69.c$i1;

public class c extends e implements f	// class@00317a
{
    public final Map A;
    public final ArrayList B;
    public int C;
    public String D;
    public String E;
    public String F;
    public String G;
    public AlbumType H;
    public String I;
    public EditorMemoryParamsImpl J;
    public String K;
    public boolean L;
    public boolean M;
    public int N;
    public boolean O;
    public List P;
    public String d;
    public int e;
    public String f;
    public int g;
    public AICutMusicInfo h;
    public boolean i;
    public a j;
    public EditorSmartClipTask k;
    public long l;
    public EditorSdk2V2$VideoEditorProject m;
    public String n;
    public ClientContent$LocalIntelligentAlbumPackage o;
    public String p;
    public String q;
    public final Set r;
    public String s;
    public String t;
    public String u;
    public String v;
    public AICutMusicInfo w;
    public double x;
    public double y;
    public boolean z;

    public void c(List p0){
       a.p(p0, "mMedias");
       super();
       this.P = p0;
       this.d = "";
       this.f = "";
       this.j = new a();
       this.n = "";
       this.p = "";
       this.q = "-1";
       this.r = new LinkedHashSet();
       this.s = "";
       this.t = "";
       this.x = 0xbff0000000000000;
       this.y = 0xbff0000000000000;
       this.z = true;
       this.A = new LinkedHashMap();
       this.B = new ArrayList();
       this.H = AlbumType.AICUT;
       this.O = CpuAbiUtils.b(a.b());
       this.b = true;
       Iterator iterator = this.P.iterator();
       while (iterator.hasNext()) {
          QMedia qMedia = iterator.next();
          c tl = this.l;
          QMedia duration = (qMedia.isVideo())? qMedia.duration: 3000;
          long l = tl + duration;
          this.l = l;
       }
       return;
    }
    public final t A(Pair p0,boolean p1){
       c obj2;
       t ot;
       Object obj = this;
       Object obj1 = p0;
       c uoc = c.class;
       if (PatchProxy.isSupport(uoc)) {
          obj2 = PatchProxy.applyTwoRefs(obj1, Boolean.valueOf(p1), obj, uoc, "38");
          if (obj2 != PatchProxyResult.class) {
             return obj2;
          }
       }
       a.p(obj1, "result");
       AICutStyle uAICutStyle = p0.getSecond().i();
       String str = "style.mLyricStyleId";
       if (p0.getFirst() == AICutErrorCode.NO_ERROR) {
          AICutStyle mLyricStyleI = uAICutStyle.mLyricStyleId;
          a.o(mLyricStyleI, str);
          double lyricPositio = uAICutStyle.getLyricPositionX();
          double lyricPositio1 = uAICutStyle.getLyricPositionY();
          if (PatchProxy.isSupport(uoc)) {
             ot = PatchProxy.applyFourRefs(mLyricStyleI, Double.valueOf(lyricPositio), Double.valueOf(lyricPositio1), Boolean.valueOf(p1), this, c.class, "39");
             if (ot != PatchProxyResult.class) {
             label_0088 :
                ot = ot.flatMap(new c$a(obj, uAICutStyle, obj1));
                a.o(ot, "applyLyricAEAnimation\(st…ust\(result.first\)\n      }");
             }
          }
          c uoc1 = d.d.a().c();
          uoc = obj.w;
          obj2 = obj.m;
          if (obj2 == null) {
             a.S("mVideoProject");
          }
          ot = uoc1.j2(mLyricStyleI, lyricPositio, lyricPositio1, uoc, EditorSdk2UtilsV2.getDisplayDuration(obj2), p1);
          goto label_0088 ;
       }else if(p0.getFirst() == AICutErrorCode.DOWNLOAD_MUSIC_FAILED && !p1){
          AICutStyle mLyricStyleI1 = uAICutStyle.mLyricStyleId;
          a.o(mLyricStyleI1, str);
          ot = this.D(mLyricStyleI1, uAICutStyle.getLyricPositionX(), uAICutStyle.getLyricPositionY());
          ot = ot.flatMap(new c$b(obj, uAICutStyle, obj1));
       }else {
          ot = t.just(p0.getFirst());
       }
       a.o(ot, "if \(result.first == AICu….just\(result.first\)\n    }");
       return ot;
    }
    public final t B(a p0){
       Object[] objArray1;
       t ot;
       AICutErrorCode obj = PatchProxy.applyOneRefs(p0, this, c.class, "37");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "downloadTask");
       obj = p0.b();
       int i = 0;
       Object[] objArray = new Object[i];
       g.D().w("AICutProject", "applyStyleAndMusic\(\): "+p0+" result="+obj, objArray);
       String str = "Observable.just\(Pair\(result, downloadTask\)\)";
       if (obj == AICutErrorCode.DOWNLOAD_STYLE_FAILED) {
          objArray1 = new Object[i];
          g.D().A("AICutProject", "applyStyleAndMusic: style failed", objArray1);
          ot = t.just(new Pair(obj, p0));
          a.o(ot, str);
          return ot;
       }else {
          AICutStyle mStyleId = p0.i().mStyleId;
          a.o(mStyleId, "downloadTask.getStyle\(\).mStyleId");
          if (a.g(mStyleId, this.p) ^ 0x01) {
             objArray1 = new Object[i];
             g.D().w("AICutProject", "applyStyleAndMusic\(\): before apply ignore apply "+"not equal mExpectStyleId="+this.p, objArray1);
             ot = t.just(new Pair(obj, p0));
             a.o(ot, str);
             return ot;
          }else {
             d.d.a().c().r2();
             this.o0(p0.a());
             o2 oo2 = this.A.get(mStyleId);
             if (oo2 == null) {
                oo2 = new o2(this.w);
                this.A.put(mStyleId, oo2);
             }
             oo2.e(this.w);
             g og = g.D();
             StringBuilder str1 = "applyStyleAndMusic\(\) mCurrentMusic music id=";
             c tw = this.w;
             String mId = (tw != null)? tw.getMId(): null;
             Object[] objArray2 = new Object[i];
             og.w("AICutProject", str1+mId, objArray2);
             c tw1 = this.w;
             c tm = this.m;
             if (tm == null) {
                a.S("mVideoProject");
             }
             objArray1 = new Object[i];
             g.D().s("AICutProject", "applyStyleAndMusic\(\) cost: parseFrom end", objArray1);
             c$c uoc = new c$c(this, tm.clone(), mStyleId, p0, tw1);
             ot = t.fromCallable(tm).subscribeOn(d.c).observeOn(d.a).map(new c$d(this, p0, mStyleId, obj)).onErrorReturn(new c$e(p0));
             a.o(ot, "Observable.fromCallable …, downloadTask\)\n        }");
             return ot;
          }
       }
    }
    public final void C(){
       if (PatchProxy.applyVoid(null, this, c.class, "48")) {
          return;
       }
       this.j.d();
       this.j = new a();
       return;
    }
    public final t D(String p0,double p1,double p2){
       if (PatchProxy.isSupport(c.class)) {
          Object obj = PatchProxy.applyThreeRefs(p0, Double.valueOf(p1), Double.valueOf(p2), this, c.class, "40");
          if (obj != PatchProxyResult.class) {
             return obj;
          }
       }
       return d.d.a().c().J0(p0, p1, p2);
    }
    public final void E(t p0,String p1){
       z a;
       c uoc = c.class;
       if (PatchProxy.applyVoidTwoRefs(p0, p1, this, uoc, "17")) {
          return;
       }
       t ot = PatchProxy.applyTwoRefs(p0, p1, this, uoc, "16");
       if (ot != PatchProxyResult.class) {
       }else {
          a.p(p0, "taskObservable");
          a.p(p1, "styleId");
          ot = p0.observeOn(d.a).doOnNext(new n(this, p1)).takeLast(1);
          a.o(ot, "taskObservable\n        .…个消息.\n        .takeLast\(1\)");
       }
       a = d.a;
       this.j.c(ot.observeOn(a).doOnNext(new c$f(this, p1)).observeOn(a).flatMap(new c$g(this)).flatMap(new c$h(this)).observeOn(a).doFinally(new c$i(this, p1)).subscribe(new c$j(this, p1), new c$k(this, p1)));
       return;
    }
    public final t F(AICutMusicInfo p0,AICutStyle p1){
       t ot;
       t obj = PatchProxy.applyTwoRefs(p0, p1, this, c.class, "20");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "music");
       a.p(p1, "style");
       if (!p0.isEmpty()) {
          ot = t.just(p0);
          a.o(ot, "Observable.just\(music\)");
          return ot;
       }else {
          Object[] objArray = new Object[0];
          g.D().w("AICutProject", "fetchMusicIfNeed request music list", objArray);
          AICutStyle mMusics = p1.mMusics;
          a.o(mMusics, "style.mMusics");
          obj = d.d.a().c().z2(mMusics);
          ot = obj.onErrorReturn(c$r.b).map(new c$s(p1, p0));
          a.o(ot, "AICutSdk.config.mainProc…          music\n        }");
          return ot;
       }
    }
    public final void G(a p0){
       if (PatchProxy.applyVoidOneRefs(p0, this, c.class, "55")) {
          return;
       }
       a.p(p0, "task");
       AICutStyle uAICutStyle = p0.i();
       Object[] objArray = new Object[0];
       g.D().w("AICutProject", "findACachedMusicForDownloadTask for "+uAICutStyle, objArray);
       AICutStyle mStyleId = uAICutStyle.mStyleId;
       a.o(mStyleId, "style.mStyleId");
       mStyleId = this.I(mStyleId);
       if (mStyleId != null) {
          mStyleId = mStyleId.mMusics;
          if (mStyleId != null) {
          label_0047 :
             Iterator iterator = mStyleId.iterator();
             while (iterator.hasNext()) {
                AICutMusicInfo uAICutMusicI = iterator.next();
                String str = "music";
                a.o(uAICutMusicI, str);
                File uFile = d.d.a().c().q2(uAICutMusicI);
                if (uFile != null) {
                   if (!PatchProxy.applyVoidTwoRefs(uAICutMusicI, uFile, p0, a.class, "16")) {
                      a.p(uAICutMusicI, str);
                      a.p(uFile, "cacheFile");
                      a uoa = new a(uAICutMusicI);
                      p0.b = uoa;
                      uoa.d(100);
                      p0.b.e(uFile);
                   }
                   Object[] objArray1 = new Object[0];
                   g.D().w("AICutProject", "find a cache music file for "+uAICutStyle+" music id="+uAICutMusicI.getMId(), objArray1);
                   break ;
                }
             }
             return;
          }
       }
       List list = CollectionsKt__CollectionsKt.E();
       goto label_0047 ;
    }
    public AICutMusicInfo H(AICutStyle p0){
       Object[] objArray;
       AICutMusicInfo uAICutMusicI;
       c obj = PatchProxy.applyOneRefs(p0, this, c.class, "21");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "st");
       int i = 1;
       if (this.B.isEmpty() ^ i) {
          objArray = new Object[0];
          g.D().w("AICutProject", "mRecommendMusicIndex="+this.C+",size="+this.B.size(), objArray);
          if (this.C == this.B.size()) {
             this.C = 0;
          }
          obj = this.C;
          this.C = obj + 1;
          uAICutMusicI = this.B.get(obj);
       }else {
          AICutStyle mMusics = p0.mMusics;
          if (mMusics != null && !mMusics.isEmpty()) {
             i = 0;
          }
          if (i) {
             objArray = new Object[0];
             g.D().A("AICutProject", "Style mMusics is null or empty styleName="+p0.mName, objArray);
             uAICutMusicI = u0.a();
          }else {
             p0 = p0.mMusics;
             a.o(p0, "st.mMusics");
             uAICutMusicI = CollectionsKt___CollectionsKt.t4(p0, e.b);
          }
       }
       return uAICutMusicI;
    }
    public AICutStyle I(String p0){
       List a;
       PatchProxyResult patchProxyRe = PatchProxyResult.class;
       String obj = PatchProxy.applyOneRefs(p0, this, c.class, "25");
       if (obj != patchProxyRe) {
          return obj;
       }
       obj = "id";
       a.p(p0, obj);
       q1 h = q1.h;
       Objects.requireNonNull(h);
       AICutStyle uAICutStyle = PatchProxy.applyOneRefs(p0, h, q1.class, "9");
       if (uAICutStyle != patchProxyRe) {
       }else {
          a.p(p0, obj);
          Looper mainLooper = Looper.getMainLooper();
          a.o(mainLooper, "Looper.getMainLooper\(\)");
          int i = 1;
          if (!(a.g(Thread.currentThread(), mainLooper.getThread()) ^ i)) {
             a = q1.a;
             int i1 = 0;
             if (a != null && !a.isEmpty()) {
                i = 0;
             }
             int i2 = 0;
             if (i) {
                Object[] objArray = new Object[i1];
                g.D().A("AICutStyleInfoManager", "getStyleById: cache is empty ", objArray);
                uAICutStyle = i2;
             }else {
                Iterator iterator = a.iterator();
                while (true) {
                   if (iterator.hasNext()) {
                      Object obj1 = iterator.next();
                      if (a.g(obj1.mStyleId, p0)) {
                         i2 = obj1;
                      }
                   }
                   uAICutStyle = i2;
                   break ;
                }
             }
          }else {
             throw new RuntimeException("wrong thread");
          }
       }
       return uAICutStyle;
    }
    public final AlbumType J(){
       return this.H;
    }
    public final AICutMusicInfo K(){
       return this.w;
    }
    public final String L(){
       return this.p;
    }
    public final List M(){
       return this.P;
    }
    public final double N(){
       return this.y;
    }
    public final double O(){
       return this.x;
    }
    public final AICutMusicInfo P(){
       return this.h;
    }
    public void P3(double p0){
       c uoc = c.class;
       if (PatchProxy.isSupport(uoc) && PatchProxy.applyVoidOneRefs(Double.valueOf(p0), this, uoc, "58")) {
          return;
       }
       this.y = p0;
       Object[] objArray = new Object[0];
       g.D().s("AICutProject", "updateMusicVolume "+p0, objArray);
       return;
    }
    public final String Q(){
       return this.f;
    }
    public final int R(){
       return this.e;
    }
    public final String S(){
       return this.d;
    }
    public final ArrayList T(){
       return this.B;
    }
    public final String U(){
       return this.I;
    }
    public final String V(){
       return this.D;
    }
    public final String W(){
       return this.F;
    }
    public final String X(){
       return this.q;
    }
    public final Map Y(){
       return this.A;
    }
    public final int Z(){
       return this.N;
    }
    public void a(){
       if (PatchProxy.applyVoid(null, this, c.class, "54")) {
          return;
       }
       d.d.a().c().a();
       return;
    }
    public final EditorSdk2V2$VideoEditorProject a0(){
       c tm = this.m;
       if (tm == null) {
          a.S("mVideoProject");
       }
       return tm;
    }
    public final EditorSmartClipTask b0(){
       return this.k;
    }
    public final t c0(){
       z c;
       a obj = PatchProxy.apply(null, this, c.class, "44");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       obj = new a();
       AICutStyle uAICutStyle = new AICutStyle();
       uAICutStyle.mStyleId = "-3";
       c = d.c;
       z a = d.a;
       t ot = t.fromCallable(c$t.b).subscribeOn(c).observeOn(a).doOnNext(new c$u(obj, uAICutStyle)).observeOn(a).flatMap(new c$v(this, uAICutStyle)).observeOn(c).flatMap(c$w.b).observeOn(a).onErrorReturn(c$x.b).flatMap(new c$y(obj));
       a.o(ot, "Observable.fromCallable …able.just\(task\)\n        }");
       return ot;
    }
    public final void d0(n2 p0,int p1,AICutErrorCode p2){
       f a;
       c uoc = this;
       Object obj = p0;
       Object obj1 = p2;
       if (PatchProxy.isSupport(c.class) && PatchProxy.applyVoidThreeRefs(p0, Integer.valueOf(p1), p2, this, c.class, "33")) {
          return;
       }
       a.p(obj, "startStatusData");
       a.p(obj1, "failCode");
       long l = System.currentTimeMillis();
       p0.b().add(Long.valueOf((l - p0.g())));
       a = f.a;
       long l1 = l - obj.c;
       List list = p0.b();
       n2 g = obj.g;
       String str = (uoc.H == AlbumType.MEMORY)? "PRODUCE_TIME_ALBUM": "PRODUCE_AI_CUT";
       String str1 = str;
       c o = uoc.o;
       Objects.requireNonNull(a);
       f uof = f.class;
       if (PatchProxy.isSupport(uof)) {
          Object[] objArray = new Object[]{Long.valueOf(l1),Integer.valueOf(p1),obj1,list,Long.valueOf(g),str1,o};
          if (PatchProxy.applyVoid(objArray, a, uof, "5")) {
          label_00b6 :
             return;
          }
       }
       a.p(obj1, "produceFailCode");
       a.p(list, "costs");
       a.p(str1, "taskName");
       d.d.a().b().e(l1, p1, p2, list, g, str1, o);
       goto label_00b6 ;
    }
    public EditorSdk2V2$VideoEditorProject e(){
       c obj = PatchProxy.apply(null, this, c.class, "50");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       obj = this.m;
       if (obj == null) {
          a.S("mVideoProject");
       }
       return obj;
    }
    public t e0(String p0,String p1,n2 p2){
       Object obj = PatchProxy.applyThreeRefs(p0, p1, p2, this, c.class, "22");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "styleId");
       a.p(p1, "musicId");
       a.p(p2, "startStatusData");
       Object[] objArray = new Object[0];
       g.D().w("AICutProject", "start : start sdk analyzing pre theme id="+p0+' '+" pre music id = "+p1, objArray);
       t ot = this.h0(p0, p1, p2).observeOn(d.a).doOnNext(new c$a0(this, p2)).takeLast(1).map(new c$b0(p2));
       a.o(ot, "observableSDKAnalyzing\(s…me\n          it\n        }");
       return ot;
    }
    public boolean f(AICutStyle p0){
       boolean b;
       Object obj = PatchProxy.applyOneRefs(p0, this, c.class, "65");
       if (obj != PatchProxyResult.class) {
          return obj.booleanValue();
       }
       a.p(p0, "style");
       Object obj1 = PatchProxy.applyTwoRefs(this, p0, null, f$a.class, "1");
       if (obj1 != PatchProxyResult.class) {
          b = obj1.booleanValue();
       }else {
          a.p(p0, "style");
          b = false;
       }
       return b;
    }
    public final t f0(n2 p0){
       t obj = PatchProxy.applyOneRefs(p0, this, c.class, "28");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "startStatusData");
       int i = 0;
       Object[] objArray = new Object[i];
       g.D().w("AICutProject", "start: prepareVoiceDetect start", objArray);
       obj = a1.a.a("CATEGORY_VOICE_DETECT");
       if (this.L != null) {
          Object[] objArray1 = new Object[i];
          g.D().w("AICutProject", "observableDownloadVoiceDetect: skip voice detect", objArray1);
          a uoa = new a("");
          uoa.d(100);
          obj = t.just(uoa);
          a.o(obj, "Observable.just\(fakeTask\)");
       }
       t ot = obj.observeOn(d.a).doOnNext(new c$c0(this, p0)).takeLast(1).flatMap(new c$d0(p0));
       a.o(ot, "voiceModeObserver.observ…tartStatusData\)\n        }");
       return ot;
    }
    public void g(int p0){
       this.N = p0;
    }
    public t g0(){
       AICutStyle mStyleId;
       AICutStyle mMusics;
       Object[] objArray2;
       t ot;
       Object[] objArray = null;
       Ref$ObjectRef obj = PatchProxy.apply(objArray, this, c.class, "24");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       obj = new Ref$ObjectRef();
       String str = "";
       obj.element = str;
       int i = 0;
       if (this.M != null) {
          AICutStyle uAICutStyle = this.k0();
          mStyleId = uAICutStyle.mStyleId;
          a.o(mStyleId, "randomStyle.mStyleId");
          obj.element = mStyleId;
          if (!q.f(uAICutStyle.mMusics)) {
             mMusics = uAICutStyle.mMusics;
             a.o(mMusics, "randomStyle.mMusics");
             str = CollectionsKt___CollectionsKt.t4(mMusics, e.b).getMId();
          }
          Object[] objArray1 = new Object[i];
          g.D().w("AICutProject", "skip scene analyze ,styleId="+obj.element+" musicId="+str, objArray1);
       }
       int i1 = 1;
       c uoc = (!this.d.length())? 1: null;
       if (uoc) {
          objArray2 = (!this.f.length())? 1: null;
          if (objArray2) {
             objArray2 = new Object[i];
             g.D().w("AICutProject", "start: no pre select style", objArray2);
             ot = t.just(new Pair(obj.element, str));
             a.o(ot, "Observable.just\(Pair\(preStyleId, preMusicId\)\)");
             return ot;
          }
       }
       c td = this.d;
       obj.element = td;
       uoc = this.f;
       td = (td.length() > 0)? 1: null;
       if (td && ((a.g("-1", this.d) ^ i1) && (a.g("-3", this.d) ^ i1))) {
          mMusics = this.I(this.d);
          if (mMusics == null) {
             Object[] objArray3 = new Object[i];
             g.D().w("AICutProject", "start: no pre select Style "+this.d, objArray3);
             AICutStyle mStyleId1 = this.k0().mStyleId;
             a.o(mStyleId1, "randomStyle\(\).mStyleId");
             obj.element = mStyleId1;
          }else {
             mMusics = mMusics.mMusics;
             a.o(mMusics, "s.mMusics");
             Iterator iterator = mMusics.iterator();
             while (true) {
                if (iterator.hasNext()) {
                   Object obj1 = iterator.next();
                   if (a.g(obj1.getMId(), this.f)) {
                      objArray = obj1;
                   }
                }
                this.h = objArray;
             }
             objArray2 = new Object[i];
             g.D().w("AICutProject", "start: cant find music for style="+obj.element+" music="+this.f+" start get music info", objArray2);
             ot = d.d.a().c().o2(this.f, this.g).map(new c$e0(this, obj)).onErrorReturn(new c$f0(this, obj));
             a.o(ot, "AICutSdk.config.mainProc…PTY_MUSIC_ID\)\n          }");
             return ot;
          }
       }
       if (this.f.length() <= 0) {
          i1 = 0;
       }
       if (i1 && (this.h == null && this.g != null)) {
          goto label_013d ;
       }else {
          ot = t.just(new Pair(obj.element, uoc));
          a.o(ot, "Observable.just\(Pair\(preStyleId, preMusicId\)\)");
          return ot;
       }
    }
    public AICutMusicInfo getMusic(){
       return this.w;
    }
    public List h(){
       return this.P;
    }
    public t h0(String p0,String p1,n2 p2){
       c this;
       t ot;
       PatchProxyResult patchProxyRe = PatchProxyResult.class;
       Object[] obj = PatchProxy.applyThreeRefs(p0, p1, p2, this, c.class, "23");
       if (obj != patchProxyRe) {
          return obj;
       }
       a.p(p0, "styleId");
       a.p(p1, "musicId");
       a.p(p2, "startStatusData");
       c tP = this.P;
       String str = p2.d();
       String str1 = p2.h();
       c tJ = this.J;
       this = this.H;
       c tI = this.I;
       f1 uof1 = f1.class;
       int i = 0;
       if (PatchProxy.isSupport(uof1)) {
          obj = new Object[]{tP,str,p0,p1,str1,tJ,this,tI};
          ot = PatchProxy.apply(obj, null, uof1, "1");
          if (ot != patchProxyRe) {
          }else {
          label_0063 :
             a.p(tP, "medias");
             a.p(str, "metaData");
             a.p(p0, "selectStyleId");
             a.p(p1, "selectMusicId");
             a.p(this, "albumType");
             obj = new Object[i];
             g.D().w("AICutSdkTask", "rxStartAnalyzing\(\) medias="+tP.size()+", selectStyleId = ["+p0+"],"+"selectMusicId = ["+p1+']', obj);
             if (tP.isEmpty()) {
                ot = t.error(new IllegalArgumentException("medias="+tP.size()+" or metaData="+str.length()+" is empty"));
                a.o(ot, "Observable.error\(Illegal…aData.length} is empty\"\)\)");
             }else {
                e1 uoe1 = new e1(tP, this, str, p0, p1, str1, tI, tJ, new g1(str));
                ot = t.fromCallable(new c1(tP)).subscribeOn(d.c).flatMap(patchProxyRe);
                a.o(ot, "Observable.fromCallable …start\(\)\n        }\n      }");
             }
          }
       }else {
          goto label_0063 ;
       }
       return ot;
    }
    public void i(){
       if (PatchProxy.applyVoid(null, this, c.class, "14")) {
          return;
       }
       Object[] objArray = new Object[0];
       g.D().s("AICutProject", "cancelChangeStyle\(\) called", objArray);
       this.p = this.q;
       return;
    }
    public t i0(n2 p0){
       t ot;
       Iterator obj = PatchProxy.applyOneRefs(p0, this, c.class, "31");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "startStatusData");
       int i = 0;
       Object[] objArray = new Object[i];
       g.D().w("AICutProject", "observableTransCode\(\) called with: startStatusData = "+p0, objArray);
       if (this.O != null) {
          Object[] objArray1 = new Object[i];
          g.D().w("AICutProject", "observableTransCode: skip transcode", objArray1);
          obj = this.P.iterator();
          while (obj.hasNext()) {
             QMedia qMedia = obj.next();
             qMedia.mExportFilePath = qMedia.path;
          }
          d2$b uob = new d2$b();
          uob.d(this.P);
          uob.c(100);
          ot = t.just(uob);
       }else {
          ot = p0.a().l(this.P);
       }
       t ot1 = ot.observeOn(d.a).doOnNext(new c$g0(this, p0)).takeLast(1).doOnNext(new c$h0(this, p0));
       a.o(ot1, "observerTranscode\n      …entTimeMillis\(\)\n        }");
       return ot1;
    }
    public boolean isAnnualAlbum(){
       Object obj = PatchProxy.apply(null, this, c.class, "62");
       if (obj != PatchProxyResult.class) {
          return obj.booleanValue();
       }
       return false;
    }
    public void j(boolean p0){
       if (PatchProxy.isSupport(c.class)) {
          PatchProxy.applyVoidOneRefs(Boolean.valueOf(p0), this, c.class, "64");
       }
       return;
    }
    public final t j0(n2 p0){
       z a;
       a1 obj = PatchProxy.applyOneRefs(p0, this, c.class, "29");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "startStatusData");
       int i = 3;
       Integer[] integerArray = new Integer[i];
       int i1 = 0;
       for (int i2 = 0; i2 < i; i2 = i2 + 1) {
          integerArray[i2] = Integer.valueOf(i1);
       }
       obj = a1.a;
       t ot = obj.a("CATEGORY_MAGIC_YCNN_SCENE");
       t ot1 = obj.a("CATEGORY_YCNN_LAND_MARK");
       t ot2 = t.merge(ot, ot1, obj.a("CATEGORY_FACE_ATTR"));
       a = d.a;
       int i3 = 1;
       ot2 = ot2.observeOn(a).doOnNext(new c$k0(this, integerArray, p0)).takeLast(i3);
       a.o(ot2, "Observable.merge\(\n      …   }\n        .takeLast\(1\)");
       if (!this.isAnnualAlbum()) {
          if (this.d.length() <= 0) {
             i3 = 0;
          }
          if (i3) {
          label_006b :
             Object[] objArray = new Object[i1];
             g.D().w("AICutProject", "start do not need download ycnn", objArray);
             a uoa = new a("");
             uoa.d(100);
             ot2 = t.just(uoa).observeOn(a).doOnNext(new c$i0(this, p0));
             a.o(ot2, "Observable.just\(fakeTask…alProgress\) }\n          }");
          label_009a :
             t ot3 = ot2.map(new c$j0(p0));
             a.o(ot3, "ycnn\n        .map {\n    …\(\)\n          it\n        }");
             return ot3;
          }
       }
       if (this.M != null) {
          goto label_006b ;
       }else {
          goto label_009a ;
       }
    }
    public AICutStyle k(){
       PatchProxyResult patchProxyRe = PatchProxyResult.class;
       AICutStyle obj = PatchProxy.apply(null, this, c.class, "12");
       if (obj != patchProxyRe) {
          return obj;
       }
       if (TextUtils.n(this.q, "-1")) {
          return AICutStyle.newEmptyStyle();
       }
       if (!TextUtils.n(this.q, "-3")) {
          return this.I(this.q);
       }
       obj = PatchProxy.apply(null, null, i.class, "15");
       if (obj != patchProxyRe) {
       }else {
          obj = new AICutStyle();
          obj.mStyleId = "-3";
          obj.mLocalDir = i.a.c();
       }
       return obj;
    }
    public AICutStyle k0(){
       PatchProxyResult patchProxyRe = PatchProxyResult.class;
       q1 obj = PatchProxy.apply(null, this, c.class, "26");
       if (obj != patchProxyRe) {
          return obj;
       }
       obj = q1.h;
       Objects.requireNonNull(obj);
       AICutStyle uAICutStyle = PatchProxy.apply(null, obj, q1.class, "23");
       if (uAICutStyle != patchProxyRe) {
       }else {
          List a = q1.a;
          if (a.isEmpty()) {
             uAICutStyle = AICutStyle.newEmptyStyle();
             a.o(uAICutStyle, "AICutStyle.newEmptyStyle\(\)");
          }else {
             uAICutStyle = CollectionsKt___CollectionsKt.t4(a, e.b);
          }
       }
       return uAICutStyle;
    }
    public void l(EditorSdk2V2$VideoEditorProject p0,double p1,double p2,String p3,String p4){
       String str;
       StringBuilder mId;
       c uoc = c.class;
       if (PatchProxy.isSupport(uoc)) {
          Object[] objArray = new Object[]{p0,Double.valueOf(p1),Double.valueOf(p2),p3,p4};
          if (PatchProxy.applyVoid(objArray, this, uoc, "49")) {
             return;
          }
       }
       a.p(p0, "videoProject");
       this.x = p1;
       this.y = p2;
       this.m = p0;
       Object[] objArray1 = new Object[0];
       g.D().w("AICutProject", "initIfNeed: style="+p3+", music id="+p4, objArray1);
       if (TextUtils.x(p3)) {
          Object[] objArray2 = new Object[0];
          g.D().w("AICutProject", "init styleId is empty --> 原片", objArray2);
          str = "-2";
       }else {
          str = String.valueOf(p3);
       }
       o2 oo2 = this.A.get(str);
       AICutMusicInfo uAICutMusicI = null;
       if (oo2 == null) {
          oo2 = new o2(uAICutMusicI, 1, uAICutMusicI);
          this.A.put(str, oo2);
       }
       if (p4 != null) {
          c tw = this.w;
          mId = (tw != null)? tw.getMId(): uAICutMusicI;
          if ((a.g(mId, p4) ^ 1) && oo2.b() == null) {
             Object[] objArray3 = new Object[0];
             g.D().w("AICutProject", "initIfNeed: init current music from draft", objArray3);
             oo2.e(d.d.a().c().F2());
          }
       }
    label_00bc :
       this.v0(str);
       g og = g.D();
       mId = "initIfNeed: styleId="+this.q+",statusMusicId=";
       AICutMusicInfo uAICutMusicI1 = oo2.b();
       if (uAICutMusicI1 != null) {
          uAICutMusicI = uAICutMusicI1.getMId();
       }
       objArray1 = new Object[0];
       og.w("AICutProject", mId+uAICutMusicI+"  musicId="+p4, objArray1);
       return;
    }
    public final boolean l0(AICutErrorCode p0){
       c obj = PatchProxy.applyOneRefs(p0, this, c.class, "34");
       if (obj != PatchProxyResult.class) {
          return obj.booleanValue();
       }
       a.p(p0, "error");
       int i = 1;
       int i1 = 0;
       obj = (this.d.length() > 0)? 1: null;
       g og = (obj && (a.g(this.d, this.q) ^ i))? 1: null;
       StringBuilder str = (p0 == AICutErrorCode.NO_ERROR || p0 == AICutErrorCode.DOWNLOAD_MUSIC_FAILED)? 1: null;
       if (!str || !og) {
          i = false;
       }
       Object[] objArray = new Object[i1];
       g.D().s("AICutProject", "reportNotUserPreSelectStyle\(\) error = ["+p0+"] "+"mPreSelectThemeId="+this.d+" mStyleId="+this.q+" shouldShow="+i, objArray);
       return i;
    }
    public void m(boolean p0){
       c uoc = c.class;
       if (PatchProxy.isSupport(uoc) && PatchProxy.applyVoidOneRefs(Boolean.valueOf(p0), this, uoc, "47")) {
          return;
       }
       int i = 0;
       Object[] objArray = new Object[i];
       g.D().w("AICutProject", "editDirectly\(\) called", objArray);
       this.C();
       this.i = i;
       if (!p0) {
          return;
       }
       this.v0("-1");
       this.j.c(t.fromIterable(this.P).subscribeOn(d.c).concatMap(c$l.b).toList().d0().flatMap(new c$m(this, (((double)d.d.a().c().getMaxDuration() * 0x3ff0000000000000) / (double)1000))).observeOn(d.a).flatMap(c$n.b).flatMap(new c$o(this)).subscribe(new c$p(this), c$q.b));
       return;
    }
    public void m0(EditorSdk2V2$VideoEditorProject p0,String p1,String p2,String p3){
       if (PatchProxy.applyVoidFourRefs(p0, p1, p2, p3, this, c.class, "35")) {
          return;
       }
       a.p(p0, "project");
       a.p(p1, "styleId");
       o2 oo2 = this.A.get(p1);
       Long longx = (oo2 != null)? Long.valueOf(oo2.c()): null;
       if (longx == null) {
          Object[] objArray = new Object[0];
          g.D().A("AICutProject", "sdkApply: cant find seed for style="+p1, objArray);
          longx = Long.valueOf(System.currentTimeMillis());
       }
       Object[] objArray1 = new Object[0];
       g.D().s("AICutProject", "sdkApply\(\) called with: styleId = ["+p1+"], seed="+longx+' '+"stylePath = ["+p2+"], "+"musicPath = ["+p3+']', objArray1);
       i.a.g(p0);
       return;
    }
    public t n(Object p0){
       Object obj = PatchProxy.applyOneRefs(p0, this, c.class, "60");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "template");
       t ot = PatchProxy.applyTwoRefs(this, p0, null, f$a.class, "2");
       if (ot != PatchProxyResult.class) {
       }else {
          a.p(p0, "template");
          ot = t.just(Integer.valueOf(0));
          a.o(ot, "Observable.just\(0\)");
       }
       return ot;
    }
    public final void n0(AlbumType p0){
       if (PatchProxy.applyVoidOneRefs(p0, this, c.class, "10")) {
          return;
       }
       a.p(p0, "<set-?>");
       this.H = p0;
       return;
    }
    public void o(){
       if (PatchProxy.applyVoid(null, this, c.class, "56")) {
          return;
       }
       Object[] objArray = new Object[0];
       g.D().s("AICutProject", "clearStyleCache\(\) called", objArray);
       this.A.clear();
       return;
    }
    public final void o0(AICutMusicInfo p0){
       if (PatchProxy.applyVoidOneRefs(p0, this, c.class, "9")) {
          return;
       }
       this.w = p0;
       String mId = (p0 != null)? p0.getMId(): null;
       this.v = mId;
       return;
    }
    public String p(){
       return this.q;
    }
    public final void p0(String p0){
       if (PatchProxy.applyVoidOneRefs(p0, this, c.class, "5")) {
          return;
       }
       a.p(p0, "<set-?>");
       this.p = p0;
       return;
    }
    public void q(String p0){
       Object[] objArray;
       Object[] objArray2;
       d d;
       i a;
       String str = this;
       Object obj = p0;
       c uoc = c.class;
       if (PatchProxy.applyVoidOneRefs(obj, str, uoc, "13")) {
          return;
       }
       a.p(obj, "id");
       String str1 = "AICutProject";
       int i = 0;
       if (a.g(str.q, obj)) {
          objArray = new Object[i];
          g.D().w(str1, "set Style: is same ignore this is try", objArray);
          return;
       }else {
          str.p = obj;
          if (!PatchProxy.applyVoidOneRefs(obj, str, uoc, "15")) {
             Object[] objArray1 = new Object[i];
             g.D().w(str1, "startChangeStyle\(\) styleId="+obj, objArray1);
             String str2 = "-1";
             objArray1 = null;
             if (a.g(obj, str2)) {
                if (!PatchProxy.applyVoid(objArray1, str, uoc, "41") && !a.g(str.q, str2)) {
                   objArray2 = new Object[i];
                   g.D().s(str1, "removeStyle\(\) "+str.q, objArray2);
                   str.o0(objArray1);
                   d = d.d;
                   c uoc1 = d.a().c();
                   c m = str.m;
                   String str3 = "mVideoProject";
                   if (m == null) {
                      a.S(str3);
                   }
                   EditorSdk2V2$AudioAsset uAudioAsset = uoc1.G2(m);
                   uoc = d.a().c();
                   uoc1 = str.m;
                   if (uoc1 == null) {
                      a.S(str3);
                   }
                   List list = uoc.t2(uoc1);
                   uoc = str.m;
                   if (uoc == null) {
                      a.S(str3);
                   }
                   str.m0(uoc, str.q, objArray1, objArray1);
                   a = i.a;
                   c m1 = str.m;
                   if (m1 == null) {
                      a.S(str3);
                   }
                   a.f(m1, str.w, str.y, str.x, uAudioAsset, list, str.z);
                   str.v0(str2);
                }
                str.j.c(this.D("", 0, 0).observeOn(d.a).subscribe(new q0(str), new r0(obj)));
             }else {
                str2 = "-3";
                if (a.g(obj, str2)) {
                   if (!PatchProxy.applyVoid(objArray1, str, uoc, "43")) {
                      if (a.g(str.q, str2)) {
                         objArray = new Object[i];
                         g.D().w(str1, "applySimpleStyle: has been simple style, return ", objArray);
                      }else {
                         str.o0(objArray1);
                         str.p = str2;
                         if (str.r.contains(str2)) {
                            objArray = new Object[i];
                            g.D().w(str1, "applySimpleStyle : simple style is loading", objArray);
                         }else {
                            str.r.add(str2);
                            objArray2 = new Object[i];
                            g.D().s(str1, "applySimpleStyle\(\) : mStyleLoadingSet="+str.r, objArray2);
                            str.z(new e(str2));
                            str.z(new f(str2));
                            str.E(this.c0(), str2);
                         }
                      }
                   }
                }else {
                   AICutStyle uAICutStyle = this.I(p0);
                   if (uAICutStyle == null) {
                      objArray2 = new Object[i];
                      g.D().t(str1, "startChangeStyle cant find styleId="+obj, objArray2);
                   }else if(str.r.contains(obj)){
                      objArray2 = new Object[i];
                      g.D().w(str1, "startChangeStyle : "+obj+" is loading", objArray2);
                   }else {
                      str.r.add(obj);
                      Object[] objArray3 = new Object[i];
                      g.D().s(str1, "startChangeStyle\(\) : mStyleLoadingSet="+str.r, objArray3);
                      str.z(new n0(obj));
                      o2 oo2 = str.A.get(obj);
                      if (oo2 == null) {
                         objArray3 = new Object[i];
                         g.D().w(str1, "startChangeStyle: first apply create StyleStatus "+uAICutStyle, objArray3);
                         oo2 = new o2(objArray1, 1, objArray1);
                         str.A.put(obj, oo2);
                      }
                      AICutMusicInfo uAICutMusicI = oo2.b();
                      if (uAICutMusicI == null) {
                         uAICutMusicI = str.H(uAICutStyle);
                         a.o(uAICutMusicI, "getAiCutMusicInfo\(styleToApply\)");
                      }
                      objArray2 = new Object[i];
                      g.D().w(str1, "startChangeStyle : music id="+uAICutMusicI.getMId(), objArray2);
                      str.z(new o0(obj));
                      t ot = str.F(uAICutMusicI, uAICutStyle).flatMap(new s0(uAICutStyle));
                      a.o(ot, "observable");
                      str.E(ot, obj);
                   }
                }
             }
          }
          return;
       }
    }
    public final void q0(double p0){
       this.x = p0;
    }
    public void r(boolean p0){
       if (PatchProxy.isSupport(c.class)) {
          PatchProxy.applyVoidOneRefs(Boolean.valueOf(p0), this, c.class, "63");
       }
       return;
    }
    public final void r0(String p0){
       if (PatchProxy.applyVoidOneRefs(p0, this, c.class, "8")) {
          return;
       }
       a.p(p0, "<set-?>");
       this.t = p0;
       return;
    }
    public AICutMusicInfo s(String p0){
       Object obj = PatchProxy.applyOneRefs(p0, this, c.class, "61");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "styleId");
       Object obj1 = null;
       Object obj2 = PatchProxy.applyTwoRefs(this, p0, obj1, f$a.class, "3");
       if (obj2 != PatchProxyResult.class) {
          obj1 = obj2;
       }else {
          a.p(p0, "styleId");
       }
       return obj1;
    }
    public final void s0(AICutMusicInfo p0){
       this.h = p0;
    }
    public t start(){
       Object[] objArray1;
       z a;
       Object[] objArray = null;
       n2 obj = PatchProxy.apply(objArray, this, c.class, "18");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       String str = "AICutProject";
       a.f.a().g(PostCommonBiz.KUAISHAN, str, "start: mMedias.size = "+this.P.size());
       int i = 0;
       if (this.i != null) {
          objArray1 = new Object[i];
          g.D().A(str, "start: start twice!", objArray1);
          return objArray;
       }else {
          this.i = true;
          this.z(c$l0.a);
          obj = new n2(this.P, this.O);
          if (!obj.f()) {
             objArray1 = new Object[i];
             g.D().w(str, "start: don\'t need trans code", objArray1);
             this.z(c$m0.a);
          }
          a = d.a;
          t ot = t.fromCallable(c$y0.b).subscribeOn(d.c).flatMap(new c$z0(this, obj)).flatMap(new c$a1(this, obj)).flatMap(new c$b1(this, obj)).flatMap(new c$c1(this, obj)).flatMap(new c$d1(this)).flatMap(new c$e1(this, obj)).flatMap(c$f1.b).flatMap(new c$g1(this, obj)).flatMap(c$p0.b).flatMap(new c$q0(this, obj)).flatMap(new c$r0(this)).observeOn(a).doOnDispose(new c$s0(this, obj)).observeOn(a).flatMap(new c$t0(this)).flatMap(new c$u0(this)).flatMap(new c$v0(this)).flatMap(c$w0.b).observeOn(a);
          ot = ot.doFinally(new c$x0(this));
          c tN = this.N;
          if (tN > null) {
             ot = ot.timeout((long)tN, TimeUnit.SECONDS);
          }
          this.j.c(ot.subscribe(new c$n0(this, obj), new c$o0(this, obj)));
          return ot;
       }
    }
    public void stop(){
       if (PatchProxy.applyVoid(null, this, c.class, "46")) {
          return;
       }
       Object[] objArray = new Object[0];
       g.D().w("AICutProject", "stop\(\) called", objArray);
       this.C();
       this.i = false;
       return;
    }
    public boolean t(){
       Object obj = PatchProxy.apply(null, this, c.class, "53");
       if (obj != PatchProxyResult.class) {
          return obj.booleanValue();
       }
       return (TextUtils.n(this.u, this.v) ^ 0x01);
    }
    public void t0(double p0){
       c uoc = c.class;
       if (PatchProxy.isSupport(uoc) && PatchProxy.applyVoidOneRefs(Double.valueOf(p0), this, uoc, "57")) {
          return;
       }
       this.x = p0;
       Object[] objArray = new Object[0];
       g.D().s("AICutProject", "updateOriginalVolume "+p0, objArray);
       return;
    }
    public void u(String p0,String p1,String p2,String p3){
       this.D = p0;
       this.E = p1;
       this.F = p2;
       this.G = p3;
    }
    public final void u0(boolean p0){
       this.i = p0;
    }
    public void v(String p0,int p1,String p2,int p3){
       if (PatchProxy.isSupport(c.class) && PatchProxy.applyVoidFourRefs(p0, Integer.valueOf(p1), p2, Integer.valueOf(p3), this, c.class, "11")) {
          return;
       }
       Object[] objArray = new Object[0];
       g.D().w("AICutProject", "setPreSelect\(\) called with: "+"themeId = ["+p0+"], musicId = ["+p2+"], "+"musicType = ["+p3+']', objArray);
       if (p0 == null) {
          p0 = "";
       }
       this.d = p0;
       this.e = p1;
       if (p2 == null) {
          p2 = "";
       }
       this.f = p2;
       this.g = p3;
       return;
    }
    public final void v0(String p0){
       if (PatchProxy.applyVoidOneRefs(p0, this, c.class, "6")) {
          return;
       }
       a.p(p0, "value");
       if (a.g(p0, this.q)) {
          return;
       }
       Object[] objArray = new Object[0];
       g.D().w("AICutProject", "mStyleId change: "+this.q+" to "+p0, objArray);
       c tq = this.q;
       this.q = p0;
       this.z(new c$z(p0, tq));
       return;
    }
    public void w(EditorSdk2V2$VideoEditorProject p0){
       if (PatchProxy.applyVoidOneRefs(p0, this, c.class, "51")) {
          return;
       }
       a.p(p0, "videoProject");
       this.m = p0;
       d.d.a().c().J2(p0);
       return;
    }
    public final void w0(EditorSdk2V2$VideoEditorProject p0){
       a.p(p0, "<set-?>");
       this.m = p0;
    }
    public void x(EditorSdk2V2$VideoEditorProject p0){
       c uoc;
       i a;
       if (PatchProxy.applyVoidOneRefs(p0, this, c.class, "52")) {
          return;
       }
       a.p(p0, "videoProject");
       d d = d.d;
       if (d.a().c().M2()) {
          return;
       }
       this.m = p0;
       AICutStyle uAICutStyle = this.k();
       String str = null;
       AICutStyle mLocalDir = (uAICutStyle != null)? uAICutStyle.mLocalDir: str;
       if (mLocalDir != null) {
          uoc = (!mLocalDir.length())? 1: null;
          if (uoc == true && uAICutStyle != null) {
             mLocalDir = m1.a.d(uAICutStyle);
          }
       }
    label_0045 :
       if (TextUtils.x(mLocalDir)) {
          mLocalDir = d.a().c().g2();
       }
       c uoc1 = d.a().c();
       uoc = this.m;
       if (uoc == null) {
          a.S("mVideoProject");
       }
       EditorSdk2V2$AudioAsset uAudioAsset = uoc1.G2(uoc);
       uoc = d.a().c();
       c tm = this.m;
       if (tm == null) {
          a.S("mVideoProject");
       }
       EditorSdk2V2$AudioAsset uAudioAsset1 = uoc.K2(tm);
       c uoc2 = d.a().c();
       tm = this.m;
       if (tm == null) {
          a.S("mVideoProject");
       }
       List list = uoc2.t2(tm);
       tm = this.m;
       if (tm == null) {
          a.S("mVideoProject");
       }
       this.m0(tm, this.q, mLocalDir, str);
       a = i.a;
       c tm1 = this.m;
       if (tm1 == null) {
          a.S("mVideoProject");
       }
       Objects.requireNonNull(a);
       if (!PatchProxy.applyVoidFourRefs(tm1, uAudioAsset1, uAudioAsset, list, a, i.class, "5")) {
          a.p(tm1, "project");
          if (uAudioAsset1 != null) {
             d.a.c(uAudioAsset1, tm1, true);
          }
          ArrayList uArrayList = new ArrayList();
          if (uAudioAsset1 != null) {
             uArrayList.add(uAudioAsset1);
          }
          if (uAudioAsset != null) {
             uArrayList.add(uAudioAsset);
          }
          if (list != null) {
             uArrayList.addAll(list);
          }
          EditorSdk2V2$AudioAsset[] uAudioAssetA = new EditorSdk2V2$AudioAsset[0];
          Object[] objArray = uArrayList.toArray(uAudioAssetA);
          Objects.requireNonNull(objArray, "null cannot be cast to non-null type kotlin.Array<T>");
          tm1.setAudioAssets(objArray);
       }
       if (uAudioAsset1 != null) {
          d a1 = d.a;
          uoc2 = this.m;
          if (uoc2 == null) {
             a.S("mVideoProject");
          }
          a1.a(uAudioAsset1, uoc2, 0.40f);
       }
       return;
    }
    public final void x0(EditorSmartClipTask p0){
       this.k = p0;
    }
    public final t y0(g1 p0,n2 p1){
       ImmutableArray obj4;
       i obj5;
       double d;
       String str3;
       c p1;
       Iterator iterator3;
       QMedia qMedia2;
       Object obj = this;
       t obj1 = p0;
       Object obj2 = p1;
       PatchProxyResult patchProxyRe = PatchProxyResult.class;
       c obj3 = PatchProxy.applyTwoRefs(obj1, obj2, obj, c.class, "32");
       if (obj3 != patchProxyRe) {
          return obj3;
       }
       a.p(obj1, "task");
       a.p(obj2, "startStatusData");
       obj3 = obj.J;
       Object[] objArray = null;
       String str = "null cannot be cast to non-null type kotlin.collections.ArrayList<com.yxcorp.gifshow.models.QMedia> /* = java.util.ArrayList<com.yxcorp.gifshow.models.QMedia> */";
       int i = 0;
       if (obj3 != null) {
          EditorMemoryAsset coverAsset = obj3.getCoverAsset();
          if (coverAsset != null) {
             String fileName = coverAsset.getFileName();
             if (fileName != null) {
                Pattern pattern = PatchProxy.apply(objArray, objArray, g.class, "4");
                if (pattern != patchProxyRe) {
                }else if(g.d == null){
                   g.d = Pattern.compile(".*\\.\(asf|avi|avs|flv|m4v|mov|mp4|3gp|mpeg|wav|wmv|jif\)$", 2);
                }
                pattern = g.d;
                QMedia qMedia = v14;
                QMedia qMedia1 = v14;
                qMedia = new QMedia(0, fileName, 0, 0, pattern.matcher(fileName).matches());
                qMedia1.mExportFilePath = fileName;
                obj3 = obj.P;
                Objects.requireNonNull(obj3, str);
                obj3.add(i, qMedia1);
             }
          }
       }
       EditorSmartClipResult uEditorSmart = p0.d();
       a.m(uEditorSmart);
       EditorSdk2V2$VideoEditorProject project = uEditorSmart.getProject();
       String str1 = "AICutProject";
       String str2 = "project.trackAssets\(\)";
       if (!TextUtils.x(obj.K)) {
          Iterator iterator = obj.P.iterator();
          while (true) {
             if (iterator.hasNext()) {
                obj4 = iterator.next();
                if (a.g(obj4.path, obj.K)) {
                   obj5 = obj4;
                }
             }else {
                obj5 = null;
             }
             obj4 = project.trackAssets();
             a.o(obj4, str2);
             Iterator iterator1 = obj4.iterator();
             int i1 = 1;
             boolean b = true;
             while (iterator1.hasNext()) {
                if (TextUtils.n(iterator1.next().assetPath(), obj.K)) {
                   b = false;
                }else {
                   continue ;
                }
             }
             Object[] objArray1 = new Object[i];
             g.D().w(str1, "transcodeForAlbumMemory:  needAdd="+b+" ,media="+obj5, objArray1);
             if (b && obj5 != null) {
                obj4 = project.trackAssets();
                a.o(obj4, str2);
                ArrayList arrayList = obj4.getArrayList();
                EditorSdk2V2$TrackAsset trackAsset = new EditorSdk2V2$TrackAsset();
                trackAsset.setAssetPath(obj.K);
                EditorSdk2V2$TimeRangeImpl timeRangeImp = new EditorSdk2V2$TimeRangeImpl();
                timeRangeImp.start = 0;
                if (obj5.isImage()) {
                   d = (double)2.50f;
                   str3 = str1;
                }else {
                   str3 = str1;
                   d = q.s((double)4, (double)(obj5.duration / 1000));
                }
                timeRangeImp.duration = d;
                trackAsset.setClippedRange(timeRangeImp);
                arrayList.add(i1, trackAsset);
                a.o(arrayList, "assets");
                EditorSdk2V2$TrackAsset[] trackAssetAr = new EditorSdk2V2$TrackAsset[0];
                objArray = arrayList.toArray(trackAssetAr);
                Objects.requireNonNull(objArray, "null cannot be cast to non-null type kotlin.Array<T>");
                project.setTrackAssets(objArray);
             label_0155 :
                obj5 = i.a;
                c p = obj.P;
                str1 = "project";
                a.o(project, str1);
                Objects.requireNonNull(obj5);
                ArrayList uArrayList = PatchProxy.applyTwoRefs(p, project, obj5, i.class, "7");
                if (uArrayList != patchProxyRe) {
                }else {
                   a.p(p, "originMedias");
                   a.p(project, str1);
                   ImmutableArray immutableArr = project.trackAssets();
                   a.o(immutableArr, str2);
                   ArrayList uArrayList1 = new ArrayList(u.Y(immutableArr, 10));
                   Iterator iterator2 = immutableArr.iterator();
                   while (iterator2.hasNext()) {
                      uArrayList1.add(iterator2.next().assetPath());
                   }
                   uArrayList = new ArrayList();
                   iterator2 = uArrayList1.iterator();
                }
                p1 = obj.P;
                Objects.requireNonNull(p1, str);
                p1.clear();
                p1 = obj.P;
                Objects.requireNonNull(p1, str);
                p1.addAll(uArrayList);
                objArray = new Object[0];
                g.D().w(str3, "after analyse mMedias.size = "+obj.P.size(), objArray);
                if (obj.O != null) {
                }else {
                   obj1 = obj.i0(obj2).map(new c$h1(obj, obj1));
                   a.o(obj1, "observableTransCode\(star…\n          task\n        }");
                   return obj1;
                }
             }
          }
          obj1 = t.just(p0);
          a.o(obj1, "Observable.just\(task\)");
          return obj1;
       }
    label_0153 :
       str3 = str1;
       goto label_0155 ;
    }
    public final t z0(a p0){
       t ot;
       Object obj = PatchProxy.applyOneRefs(p0, this, c.class, "42");
       if (obj != PatchProxyResult.class) {
          return obj;
       }
       a.p(p0, "originTask");
       if (p0.o()) {
          String str = "-3";
          if (a.g(p0.i().mStyleId, str) ^ 1) {
             Object[] objArray = new Object[0];
             g.D().w("AICutProject", "style load failed, try load local resource", objArray);
             this.p = str;
             ot = this.c0().takeLast(1).flatMap(new c$i1(this, p0));
             a.o(ot, "loadSimpleStyleResource\(…ask\n            }\n      }");
          label_005a :
             return ot;
          }
       }
       ot = t.just(p0);
       a.o(ot, "Observable.just\(originTask\)");
       goto label_005a ;
    }
}
